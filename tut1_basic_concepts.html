<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.18"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>CARLsim: Tutorial 1: Basic Concepts</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="CARLsimStyles.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">CARLsim
   &#160;<span id="projectnumber">4.1.0</span>
   </div>
   <div id="projectbrief">CARLsim: a GPU-accelerated SNN simulator</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.18 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('tut1_basic_concepts.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Tutorial 1: Basic Concepts </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#tut1s1_simple_prog">1.1 A Simple CARLsim program</a><ul><li class="level2"><a href="#tut1s1s1_config">1.1.1 CONFIG State</a></li>
<li class="level2"><a href="#tut1s1s2_setup">1.1.2 SETUP State</a></li>
<li class="level2"><a href="#tut1s1s3_run">1.1.3 RUN State</a></li>
</ul>
</li>
<li class="level1"><a href="#tut1s2_network_output">1.2 Network Output</a></li>
<li class="level1"><a href="#tut1s3_network_activity">1.3. Visualizing Network Activity</a><ul><li class="level2"><a href="#tu1s3s1_group_monitor">1.3.1 Group Monitor</a></li>
<li class="level2"><a href="#tu1s3s2_ff_curve">1.3.2 Input-Output Curve (FF Curve)</a></li>
</ul>
</li>
</ul>
</div>
<div class="textblock"><dl class="section author"><dt>Author</dt><dd>Michael Beyeler </dd>
<dd>
Kristofor D. Carlson </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="ch1_getting_started.html">Chapter 1: Getting Started</a> </dd>
<dd>
<a class="el" href="ch2_basic_concepts.html">Chapter 2: Basic Concepts</a> </dd>
<dd>
<a class="el" href="ch3_neurons_synapses_groups.html">Chapter 3: Neurons, Synapses, and Groups</a> </dd>
<dd>
<a class="el" href="ch4_connections.html">Chapter 4: Connections</a> </dd>
<dd>
<a class="el" href="ch9_matlab_oat.html">Chapter 9: MATLAB Offline Analysis Toolbox (OAT)</a></dd></dl>
<p>In this tutorial we will implement one of the smallest functional <a class="el" href="classCARLsim.html" title="CARLsim User Interface This class provides a user interface to the public sections of CARLsimCore sou...">CARLsim</a> simulations, consisting of a Poisson spike generator connected to an Izhikevich neuron with a single fixed (non-plastic) synapse. We will run the network for a total of ten seconds, during which time the firing activity of the Izhikevich neuron will be recorded and dumped to file. We will then visualize the firing activity using a <a class="el" href="classGroupMonitor.html" title="Class GroupMonitor.">GroupMonitor</a> from the MATLAB Offline Analysis Toolbox (OAT).</p>
<p>At the end of the tutorial, you will know how to:</p><ul>
<li>import the <a class="el" href="classCARLsim.html" title="CARLsim User Interface This class provides a user interface to the public sections of CARLsimCore sou...">CARLsim</a> library and instantiate the simulation object</li>
<li>create groups of neurons</li>
<li>specify the network structure by connecting neurons</li>
<li>run a network on the CPU and GPU</li>
<li>use a <a class="el" href="classGroupMonitor.html" title="Class GroupMonitor.">GroupMonitor</a> to visualize neuronal activity (OAT)</li>
</ul>
<p>This tutorial assumes you know:</p><ul>
<li>the very basics of C/C++</li>
<li>the Izhikevich neuron model</li>
<li>how to install <a class="el" href="classCARLsim.html" title="CARLsim User Interface This class provides a user interface to the public sections of CARLsimCore sou...">CARLsim</a></li>
</ul>
<p>The source code of this tutorial can be found in <code>%%CARLSIM_ROOT_DIR%%/doc/source/tutorial/1_basic_concepts</code>.</p>
<h1><a class="anchor" id="tut1s1_simple_prog"></a>
1.1 A Simple CARLsim program</h1>
<p>The smallest functional <a class="el" href="classCARLsim.html" title="CARLsim User Interface This class provides a user interface to the public sections of CARLsimCore sou...">CARLsim</a> network contains just two neurons, connected with a single synapse.</p>
<p>After successful installation, the first step in setting up a <a class="el" href="classCARLsim.html" title="CARLsim User Interface This class provides a user interface to the public sections of CARLsimCore sou...">CARLsim</a> program is to include the <code>libCARLsim</code> library and to instantiate the main simulation object: </p><div class="fragment"><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="carlsim_8h.html">carlsim.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;stdio.h&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keyword">const</span> <span class="keywordtype">char</span>* argv[]) {</div>
<div class="line">    <span class="comment">// ---------------- CONFIG STATE -------------------</span></div>
<div class="line">    <a class="code" href="classCARLsim.html">CARLsim</a> sim(<span class="stringliteral">&quot;basics&quot;</span>, <a class="code" href="carlsim__datastructures_8h.html#a625c4eced5cd956404990e73f3950258a729ca642c452f8a7c53df4a48f240537">CPU_MODE</a>, <a class="code" href="carlsim__datastructures_8h.html#a3a04fc42e22f436d2b3809236cb6ec54ae2d30a195cee6b2961cc2c23ea4b520b">USER</a>);</div>
</div><!-- fragment --><p>This prepares the simulation for execution in either <a class="el" href="carlsim__datastructures_8h.html#a625c4eced5cd956404990e73f3950258a729ca642c452f8a7c53df4a48f240537" title="model is run on CPU core(s)">CPU_MODE</a> or <a class="el" href="carlsim__datastructures_8h.html#a625c4eced5cd956404990e73f3950258a0b5ee5e90bb225a562d92e4078ad9728" title="model is run on GPU card(s)">GPU_MODE</a>, and specifies the verbosity of the status reporting mechanism, where <a class="el" href="carlsim__datastructures_8h.html#a3a04fc42e22f436d2b3809236cb6ec54ae2d30a195cee6b2961cc2c23ea4b520b" title="User mode, for experiment-oriented simulations.">USER</a> indicates the default logger mode that will print info and error messages to console and save debug messages in a text file. By default, this file is called <code>"carlsim.log"</code> and can be found in the <code>"results/"</code> subdirectory.</p>
<p>Running a simulation on the GPU is as easy as replacing <a class="el" href="carlsim__datastructures_8h.html#a625c4eced5cd956404990e73f3950258a729ca642c452f8a7c53df4a48f240537" title="model is run on CPU core(s)">CPU_MODE</a> with <a class="el" href="carlsim__datastructures_8h.html#a625c4eced5cd956404990e73f3950258a0b5ee5e90bb225a562d92e4078ad9728" title="model is run on GPU card(s)">GPU_MODE</a> in the above code. No other adjustments are necessary. However, it is possible to pass an additional input argument <code>ithGPU</code> to specify the device index (on which GPU to run in a multi-GPU system).</p>
<h2><a class="anchor" id="tut1s1s1_config"></a>
1.1.1 CONFIG State</h2>
<p>From then on, the simulation is in <a class="el" href="carlsim__datastructures_8h.html#a8d0d24f2706656b1102c5e3624df65b2ac7fa385000dcb927a21b44bce4fbfca9" title="configuration state, where the neural network is configured">CONFIG_STATE</a>, allowing the properties of the neural network to be specified. In this tutorial, we consider a network with two neuronal groups, each of which contains a single neuron.</p>
<p>A <a class="el" href="classSpikeGenerator.html">SpikeGenerator</a> group is created by specifying a name for the group (<code>"input"</code>), the number of neurons in the group (just one), and a type (<a class="el" href="carlsim__definitions_8h.html#a71b1b059a7ff0783d39e22b9b1028d90">EXCITATORY_NEURON</a>): </p><div class="fragment"><div class="line"><span class="keywordtype">int</span> gIn = sim.<a class="code" href="classCARLsim.html#a0bf4d12b0b90740faf9a2f6a4add0351">createSpikeGeneratorGroup</a>(<span class="stringliteral">&quot;input&quot;</span>, nNeur, <a class="code" href="carlsim__definitions_8h.html#a71b1b059a7ff0783d39e22b9b1028d90">EXCITATORY_NEURON</a>);</div>
</div><!-- fragment --><p> To refer to this group in later method calls, a group ID is returned (<code>gIn</code>). A <a class="el" href="classSpikeGenerator.html">SpikeGenerator</a> is different from an Izhikevich neuron in that it does not provide a differential equation of its membrane potential; instead it only contains a list of spike times.</p>
<p>Similarly, a group of Izhikevich spiking neurons can be created by specifying a name for the group (<code>"output"</code>), the number of neurons in the group (again just one), and a type (<a class="el" href="carlsim__definitions_8h.html#a71b1b059a7ff0783d39e22b9b1028d90">EXCITATORY_NEURON</a>). However, in contrast to the <a class="el" href="classSpikeGenerator.html">SpikeGenerator</a> group, we also need to specify the Izhikevich parameters a, b, c, and d. These two things can be achieved with the following code snippet: </p><div class="fragment"><div class="line"><span class="keywordtype">int</span> gOut = sim.<a class="code" href="classCARLsim.html#a6e11c10b6b079715074d857452c42e11">createGroup</a>(<span class="stringliteral">&quot;output&quot;</span>, nNeur, <a class="code" href="carlsim__definitions_8h.html#a71b1b059a7ff0783d39e22b9b1028d90">EXCITATORY_NEURON</a>);</div>
<div class="line">sim.<a class="code" href="classCARLsim.html#aa6e1dc5ae50722ae3d693f2c963d84cd">setNeuronParameters</a>(gOut, 0.02f, 0.2f, -65.0f, 8.0f); <span class="comment">// RS</span></div>
</div><!-- fragment --><p> where we use the ID <code>gOut</code> to refer to the group, and set <code>a=0.02f</code>, <code>b=0.2f</code>, <code>c=-65.0f</code>, and <code>d=8.0f</code> (regular spiking).</p>
<p>Then the synaptic connections can be specified. The two groups are connected with the <code>"one-to-one"</code> primitive type of <a class="el" href="classCARLsim.html#a30b16b93d57551dcde0559e8a4e98e27" title="Connects a presynaptic to a postsynaptic group using fixed/plastic weights and a range of delay value...">CARLsim::connect</a> that connects neuron i in the pre-synaptic group to neuron i in the post-synaptic group (both groups must have the same number of neurons): </p><div class="fragment"><div class="line"><span class="comment">// connect input to output group</span></div>
<div class="line">sim.<a class="code" href="classCARLsim.html#a30b16b93d57551dcde0559e8a4e98e27">connect</a>(gIn, gOut, <span class="stringliteral">&quot;one-to-one&quot;</span>, <a class="code" href="structRangeWeight.html">RangeWeight</a>(0.05f), 1.0f);</div>
</div><!-- fragment --><p> where we initialize and fixate the weight magnitude at <code>0.05f</code> and set the connection probability to <code>1.0f</code> (100%). We use default values for the other input arguments (1 ms axonal delay, no particular spatial receptive field, and a non-plastic synapse type, <a class="el" href="carlsim__definitions_8h.html#a40e0573abfe33884cbdaae75b5971955">SYN_FIXED</a>).</p>
<p>As a side note: Since there is only one neuron in each group, <code>"one-to-one"</code> connectivity would have the same effect as <code>"full"</code> connectivity or <code>"random"</code> connectivity with 100% connection probability.</p>
<p>Finally, we enable synaptic conductances so that the network is run in COBA mode (see <a class="el" href="ch3_neurons_synapses_groups.html#ch3s2s2_coba">3.2.2 COBA</a>): </p><div class="fragment"><div class="line"><span class="comment">// enable COBA mode</span></div>
<div class="line">sim.<a class="code" href="classCARLsim.html#a580acd7bfec3145c00014b0bd1742e2e">setConductances</a>(<span class="keyword">true</span>);</div>
</div><!-- fragment --><h2><a class="anchor" id="tut1s1s2_setup"></a>
1.1.2 SETUP State</h2>
<p>Once the spiking network has been specified, the function <a class="el" href="classCARLsim.html#a6d6c298c788eeb7b18a19d82a77761b3" title="build the network">CARLsim::setupNetwork</a> optimizes the network state for the chosen back-end (CPU or GPU) and moves the simulation into <a class="el" href="carlsim__datastructures_8h.html#a8d0d24f2706656b1102c5e3624df65b2a033f2f21470e4f79d5dc459619a6980c" title="setup state, where the neural network is prepared for execution and monitors are set">SETUP_STATE</a>: </p><div class="fragment"><div class="line"><span class="comment">// ---------------- SETUP STATE -------------------</span></div>
<div class="line">sim.<a class="code" href="classCARLsim.html#a6d6c298c788eeb7b18a19d82a77761b3">setupNetwork</a>();</div>
</div><!-- fragment --><p>In this state, we specify a <a class="el" href="classSpikeMonitor.html" title="Class SpikeMonitor.">SpikeMonitor</a> object to record network activity to a <code>"DEFAULT"</code> binary file (see <a class="el" href="ch7_monitoring.html">Chapter 7: Monitoring</a>): </p><div class="fragment"><div class="line">sim.<a class="code" href="classCARLsim.html#a1e0b4d170b65f5075f1a996554c842ab">setSpikeMonitor</a>(gOut, <span class="stringliteral">&quot;DEFAULT&quot;</span>);</div>
</div><!-- fragment --><p> This will dump all spikes of group <code>gOut</code> (in AER format) to a binary with default file name <code>"results/spk_output.dat"</code>, where <code>"output"</code> is the name that was assigned to the group <code>gOut</code> in the call to <a class="el" href="classCARLsim.html#a6e11c10b6b079715074d857452c42e11" title="creates a group of Izhikevich spiking neurons">CARLsim::createGroup</a> above.</p>
<h2><a class="anchor" id="tut1s1s3_run"></a>
1.1.3 RUN State</h2>
<p>The first call to <a class="el" href="classCARLsim.html#aafb2d44405c96aafe089f96ff867018d" title="run the simulation for time=(nSec*seconds + nMsec*milliseconds)">CARLsim::runNetwork</a> will take the simulation into <a class="el" href="carlsim__datastructures_8h.html#a8d0d24f2706656b1102c5e3624df65b2a67606f8f4ae6a12252ebcf0ddc2cc652" title="run state, where the model is stepped">RUN_STATE</a>.</p>
<p>We will run a simulation for a total of ten seconds, during which the firing activity of group <code>gOut</code> will be recorded by using the <a class="el" href="classSpikeMonitor.html" title="Class SpikeMonitor.">SpikeMonitor</a> set above.</p>
<p>At the beginning of the simulation, the spike generator group <code>gIn</code> will generate Poisson spike trains with 10Hz mean firing rate, but this number will be gradually increased every second until it reaches 100Hz. </p><div class="fragment"><div class="line"><span class="keywordtype">int</span> nNeur = 1;              <span class="comment">// number of neurons in each group</span></div>
<div class="line"><a class="code" href="classPoissonRate.html">PoissonRate</a> in(nNeur);      <span class="comment">// PoissonRate containter for SpikeGenerator group</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// ...</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// run the network repeatedly for 1 second (1*1000 + 0 ms)</span></div>
<div class="line"><span class="comment">// with different Poisson input</span></div>
<div class="line"><span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=1; i&lt;=10; i++) {</div>
<div class="line">    <span class="keywordtype">float</span> inputRateHz = i*10.0f;</div>
<div class="line">    in.setRates(inputRateHz);</div>
<div class="line">    sim.<a class="code" href="classCARLsim.html#a04f52d2840105c8ccacf8d378d1695cf">setSpikeRate</a>(gIn, &amp;in);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// run for 1 second</span></div>
<div class="line">    sim.<a class="code" href="classCARLsim.html#aafb2d44405c96aafe089f96ff867018d">runNetwork</a>(1,0);</div>
<div class="line">}</div>
</div><!-- fragment --><h1><a class="anchor" id="tut1s2_network_output"></a>
1.2 Network Output</h1>
<p>After navigating to <code>%CARLSIM_ROOT_DIR%%/doc/source/tutorial/1_basic_concepts</code>, the network can be compiled and run with the following commands (on Unix): </p><div class="fragment"><div class="line">$ make</div>
<div class="line">$ ./basic_concepts</div>
</div><!-- fragment --><p> On Windows, the <code>.vcxproj</code> file is already added to the <code>CARLsim.sln</code> solution file. Thus the project can be built simply by opening the solution file in Visual Studio, by right-clicking the project directory and choosing "Build project".</p>
<p>Some of the <a class="el" href="classCARLsim.html" title="CARLsim User Interface This class provides a user interface to the public sections of CARLsimCore sou...">CARLsim</a> output is shown below: </p><div class="fragment"><div class="line">****************      Initializing CPU Simulation      *************************</div>
<div class="line"><a class="code" href="classSpikeMonitor.html">SpikeMonitor</a> set <span class="keywordflow">for</span> group 1 (output)</div>
<div class="line"> </div>
<div class="line">*******************      Running CPU Simulation      ***************************</div>
<div class="line"> </div>
<div class="line">(t=1.000s) <a class="code" href="classSpikeMonitor.html">SpikeMonitor</a> <span class="keywordflow">for</span> group output(1) has 7 spikes in 1000ms (7.00 +/- 0.00 Hz)</div>
<div class="line">(t=2.000s) <a class="code" href="classSpikeMonitor.html">SpikeMonitor</a> for group output(1) has 8 spikes in 1000ms (8.00 +/- 0.00 Hz)</div>
<div class="line">(t=3.000s) <a class="code" href="classSpikeMonitor.html">SpikeMonitor</a> for group output(1) has 11 spikes in 1000ms (11.00 +/- 0.00 Hz)</div>
<div class="line">(t=4.000s) <a class="code" href="classSpikeMonitor.html">SpikeMonitor</a> for group output(1) has 15 spikes in 1000ms (15.00 +/- 0.00 Hz)</div>
<div class="line">(t=5.000s) <a class="code" href="classSpikeMonitor.html">SpikeMonitor</a> for group output(1) has 16 spikes in 1000ms (16.00 +/- 0.00 Hz)</div>
<div class="line">(t=6.000s) <a class="code" href="classSpikeMonitor.html">SpikeMonitor</a> for group output(1) has 16 spikes in 1000ms (16.00 +/- 0.00 Hz)</div>
<div class="line">(t=7.000s) <a class="code" href="classSpikeMonitor.html">SpikeMonitor</a> for group output(1) has 17 spikes in 1000ms (17.00 +/- 0.00 Hz)</div>
<div class="line">(t=8.000s) <a class="code" href="classSpikeMonitor.html">SpikeMonitor</a> for group output(1) has 18 spikes in 1000ms (18.00 +/- 0.00 Hz)</div>
<div class="line">(t=9.000s) <a class="code" href="classSpikeMonitor.html">SpikeMonitor</a> for group output(1) has 23 spikes in 1000ms (23.00 +/- 0.00 Hz)</div>
<div class="line">(t=10.000s) <a class="code" href="classSpikeMonitor.html">SpikeMonitor</a> for group output(1) has 25 spikes in 1000ms (25.00 +/- 0.00 Hz)</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">*******************      CPU Simulation Summary      ***************************</div>
<div class="line">Network Parameters:   numNeurons = 2 (numNExcReg:numNInhReg = 50.0:0.0)</div>
<div class="line">                      numSynapses = 1</div>
<div class="line">                      maxDelay = 1</div>
<div class="line">Simulation Mode:      COBA</div>
<div class="line">Random Seed:          1426108241</div>
<div class="line">Timing:               Model Simulation Time = 10 sec</div>
<div class="line">                      Actual Execution Time = 0.01 sec</div>
<div class="line">Average Firing Rate:  2+ms delay = 0.000 Hz</div>
<div class="line">                      1ms delay = inf Hz</div>
<div class="line">                      Overall = 34.050 Hz</div>
<div class="line">Overall Firing Count: 2+ms delay = 0</div>
<div class="line">                      1ms delay = 681</div>
<div class="line">                      Total = 681</div>
<div class="line">********************************************************************************</div>
</div><!-- fragment --><p>The <a class="el" href="classSpikeMonitor.html" title="Class SpikeMonitor.">SpikeMonitor</a> object produced one line of output at the end of every simulated second via implicitly calling <a class="el" href="classSpikeMonitor.html#aa1bdcf4ac22267e52bcb8c3cba660c84" title="prints the 2D spike vector.">SpikeMonitor::print</a>. We observe a gradual increase of the output firing rate, which coincides with the gradual increase of input stimulation. Shown in parentheses on these lines are the mean firing rate of all neurons in the group (although there is only one neuron) and the standard deviation.</p>
<p>At the end of the simulation a summary is printed, informing about the number of neurons and synapses created. The network was simulated for 10 seconds, yet its execution took only 0.01 seconds of wall-clock time, which means the network was run 1000 times faster than real-time.</p>
<h1><a class="anchor" id="tut1s3_network_activity"></a>
1.3. Visualizing Network Activity</h1>
<p>In order to plot network activity and observe weight changes in the network, we will make use of the MATLAB Offline Analysis Toolbox (OAT) (see <a class="el" href="ch9_matlab_oat.html">Chapter 9: MATLAB Offline Analysis Toolbox (OAT)</a>).</p>
<h2><a class="anchor" id="tu1s3s1_group_monitor"></a>
1.3.1 Group Monitor</h2>
<p>The Tutorial subdirectory <code>"scripts/"</code> provides a MATLAB script <code>"scripts/demoOAT.m"</code> to demonstrate the usage of the OAT. The script looks like this: </p><div class="fragment"><div class="line">% OAT demo</div>
<div class="line"> </div>
<div class="line">% init OAT by adding path</div>
<div class="line">initOAT</div>
<div class="line"> </div>
<div class="line">% then open a <a class="code" href="classGroupMonitor.html">GroupMonitor</a> on the group<span class="stringliteral">&#39;s</span></div>
<div class="line"><span class="stringliteral">% spike file and plot the activity</span></div>
<div class="line"><span class="stringliteral">GM = GroupMonitor(&#39;</span>output<span class="charliteral">&#39;,&#39;</span>../results<span class="stringliteral">&#39;)</span></div>
<div class="line"><span class="stringliteral">GM.plot</span></div>
</div><!-- fragment --><p>After adding the location of the OAT source code to the MATLAB path, a <a class="el" href="classGroupMonitor.html" title="Class GroupMonitor.">GroupMonitor</a> is opened on the group with name <code>"output"</code> whose spike file resides in <code>"../results"</code>. This group is the same as the one assigned name <code>"output"</code> and ID <code>gOut</code> in the code above (see <a class="el" href="tut1_basic_concepts.html#tut1s1s1_config">1.1.1 CONFIG State</a>), and the reason a spike file <code>"results/spk_output.dat"</code> exists is that a <a class="el" href="classSpikeMonitor.html" title="Class SpikeMonitor.">SpikeMonitor</a> was called on the group with <code>"DEFAULT"</code> file name (see <a class="el" href="tut1_basic_concepts.html#tut1s1s2_setup">1.1.2 SETUP State</a>).</p>
<p>Calling the <code>plot</code> method will then visualize group activity using default settings and a plot type that depends on the spatial structure of the neuron group. Since the network does not have any particular spatial structure, the default plot type is a raster plot, shown in frames of 1000ms, as seen in Fig. 1 below.</p>
<div class="image">
<img src="1_gm_raster.jpg" alt=""/>
<div class="caption">
Fig. 1. GroupMonitor output (raster plot)</div></div>
<h2><a class="anchor" id="tu1s3s2_ff_curve"></a>
1.3.2 Input-Output Curve (FF Curve)</h2>
<p>Alternatively, it is also possible to directly access the raw spike data by means of a SpikeReader. The Tutorial subdirectory <code>"scripts/"</code> provides a MATLAB script <code>"scripts/ffcurve.m"</code> to demonstrate the use of a SpikeReader. Its contents read as follows: </p><div class="fragment"><div class="line">% initialize OAT</div>
<div class="line">initOAT</div>
<div class="line"> </div>
<div class="line">% open SpikeReader <span class="keywordtype">object</span> on spike file</div>
<div class="line">SR = SpikeReader(<span class="stringliteral">&#39;../results/spk_output.dat&#39;</span>);</div>
<div class="line"> </div>
<div class="line">% read # spikes binned into 1000ms bins</div>
<div class="line">spk = SR.readSpikes(1000);</div>
<div class="line"> </div>
<div class="line">% plot input-output (FF) curve</div>
<div class="line">plot(10:10:100, spk, <span class="stringliteral">&#39;bo-&#39;</span>, <span class="stringliteral">&#39;LineWidth&#39;</span>,2)</div>
<div class="line">xlabel(&#39;input rate (Hz)&#39;)</div>
<div class="line">ylabel(&#39;output rate (Hz)&#39;)</div>
</div><!-- fragment --><p>After adding the location of the OAT source code to the MATLAB path, a SpikeReader is opened on the exact path to the spike file, <code>"../results/spk_output.dat"</code>. The SpikeReader allows to manipulate raw spike data directly, but it will not know how to plot things (as opposed to the OAT <a class="el" href="classGroupMonitor.html" title="Class GroupMonitor.">GroupMonitor</a>), and it will not be aware of other groups in the network (as opposed to the OAT NetworkMonitor).</p>
<p>Calling the <code>readSpikes</code> method will then parse the spike data and return the number of spikes binned into 1000ms bins. Since there is only a single neuron in the group, the returned data will be in 1D (vector) format, where the first element in the vector will contain the number of spikes the neuron emitted during the first 1000ms of the simulation (from t=0 until t=999ms).</p>
<p>All that's left to do is then to plot these numbers (y-axis) vs. the corresponding input firing rate (x-axis). The latter is specified as a vector <code>10:10:100</code> containing the input firing rates in Hz. The result is shown in Fig. 2 below.</p>
<div class="image">
<img src="1_ffcurve.jpg" alt=""/>
<div class="caption">
Fig. 2. Input-output curve (FF curve)</div></div>
<p>Alternatively, it would have been possible to emulate the <a class="el" href="classGroupMonitor.html" title="Class GroupMonitor.">GroupMonitor</a> plot from above (see <a class="el" href="tut1_basic_concepts.html#tu1s3s1_group_monitor">1.3.1 Group Monitor</a>) by calling the <code>readSpikes</code> method with value <code>-1</code> instead, which is code for returning spikes in AER format. Producing a raster plot would then have been as easy as: </p><div class="fragment"><div class="line">% <span class="keywordflow">return</span> spikes in <a class="code" href="carlsim__datastructures_8h.html#a2e28176a10c3a6cffa14fba1ab21682da3d6cce42ae7758ad2adb9e1e7e6f9eff">AER</a> format [times;neurIds]</div>
<div class="line">spkAER = SR.readSpikes(-1);</div>
<div class="line"> </div>
<div class="line">% raster plot</div>
<div class="line">plot(spkAER(1,:),spkAER(2,:),<span class="stringliteral">&#39;.k&#39;</span>)</div>
<div class="line">xlabel(&#39;time (ms)&#39;)</div>
</div><!-- fragment --><p>For users of <a class="el" href="classCARLsim.html" title="CARLsim User Interface This class provides a user interface to the public sections of CARLsimCore sou...">CARLsim</a> 2.2, please note that the <code>readSpikes</code> method of SpikeReader is essentially the same as the no longer existing MATLAB script <code>readSpikes.m</code> (see <a class="el" href="ch9_matlab_oat.html#ch9s6_migrating_scripts">9.6 Migrating from CARLsim 2.2</a>). </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<div class="ttc" id="aclassCARLsim_html_a0bf4d12b0b90740faf9a2f6a4add0351"><div class="ttname"><a href="classCARLsim.html#a0bf4d12b0b90740faf9a2f6a4add0351">CARLsim::createSpikeGeneratorGroup</a></div><div class="ttdeci">int createSpikeGeneratorGroup(const std::string &amp;grpName, int nNeur, int neurType, int preferredPartition=ANY, ComputingBackend preferredBackend=CPU_CORES)</div><div class="ttdoc">creates a spike generator group</div><div class="ttdef"><b>Definition:</b> <a href="carlsim_8cpp_source.html#l01779">carlsim.cpp:1779</a></div></div>
<div class="ttc" id="acarlsim__datastructures_8h_html_a2e28176a10c3a6cffa14fba1ab21682da3d6cce42ae7758ad2adb9e1e7e6f9eff"><div class="ttname"><a href="carlsim__datastructures_8h.html#a2e28176a10c3a6cffa14fba1ab21682da3d6cce42ae7758ad2adb9e1e7e6f9eff">AER</a></div><div class="ttdeci">@ AER</div><div class="ttdoc">mode in which spike information is collected in AER format</div><div class="ttdef"><b>Definition:</b> <a href="carlsim__datastructures_8h_source.html#l00202">carlsim_datastructures.h:202</a></div></div>
<div class="ttc" id="astructRangeWeight_html"><div class="ttname"><a href="structRangeWeight.html">RangeWeight</a></div><div class="ttdoc">a range struct for synaptic weight magnitudes</div><div class="ttdef"><b>Definition:</b> <a href="carlsim__datastructures_8h_source.html#l00311">carlsim_datastructures.h:311</a></div></div>
<div class="ttc" id="aclassSpikeMonitor_html"><div class="ttname"><a href="classSpikeMonitor.html">SpikeMonitor</a></div><div class="ttdoc">Class SpikeMonitor.</div><div class="ttdef"><b>Definition:</b> <a href="spike__monitor_8h_source.html#l00119">spike_monitor.h:119</a></div></div>
<div class="ttc" id="aclassCARLsim_html_aafb2d44405c96aafe089f96ff867018d"><div class="ttname"><a href="classCARLsim.html#aafb2d44405c96aafe089f96ff867018d">CARLsim::runNetwork</a></div><div class="ttdeci">int runNetwork(int nSec, int nMsec=0, bool printRunSummary=true)</div><div class="ttdoc">run the simulation for time=(nSec*seconds + nMsec*milliseconds)</div><div class="ttdef"><b>Definition:</b> <a href="carlsim_8cpp_source.html#l01909">carlsim.cpp:1909</a></div></div>
<div class="ttc" id="aclassCARLsim_html_a580acd7bfec3145c00014b0bd1742e2e"><div class="ttname"><a href="classCARLsim.html#a580acd7bfec3145c00014b0bd1742e2e">CARLsim::setConductances</a></div><div class="ttdeci">void setConductances(bool isSet)</div><div class="ttdoc">Sets default values for conduction decay and rise times or disables COBA alltogether.</div><div class="ttdef"><b>Definition:</b> <a href="carlsim_8cpp_source.html#l01788">carlsim.cpp:1788</a></div></div>
<div class="ttc" id="aclassPoissonRate_html"><div class="ttname"><a href="classPoissonRate.html">PoissonRate</a></div><div class="ttdoc">Class for generating Poisson spike trains.</div><div class="ttdef"><b>Definition:</b> <a href="poisson__rate_8h_source.html#l00084">poisson_rate.h:84</a></div></div>
<div class="ttc" id="acarlsim__definitions_8h_html_a71b1b059a7ff0783d39e22b9b1028d90"><div class="ttname"><a href="carlsim__definitions_8h.html#a71b1b059a7ff0783d39e22b9b1028d90">EXCITATORY_NEURON</a></div><div class="ttdeci">#define EXCITATORY_NEURON</div><div class="ttdef"><b>Definition:</b> <a href="carlsim__definitions_8h_source.html#l00077">carlsim_definitions.h:76</a></div></div>
<div class="ttc" id="acarlsim__datastructures_8h_html_a3a04fc42e22f436d2b3809236cb6ec54ae2d30a195cee6b2961cc2c23ea4b520b"><div class="ttname"><a href="carlsim__datastructures_8h.html#a3a04fc42e22f436d2b3809236cb6ec54ae2d30a195cee6b2961cc2c23ea4b520b">USER</a></div><div class="ttdeci">@ USER</div><div class="ttdoc">User mode, for experiment-oriented simulations.</div><div class="ttdef"><b>Definition:</b> <a href="carlsim__datastructures_8h_source.html#l00091">carlsim_datastructures.h:91</a></div></div>
<div class="ttc" id="aclassCARLsim_html_a04f52d2840105c8ccacf8d378d1695cf"><div class="ttname"><a href="classCARLsim.html#a04f52d2840105c8ccacf8d378d1695cf">CARLsim::setSpikeRate</a></div><div class="ttdeci">void setSpikeRate(int grpId, PoissonRate *spikeRate, int refPeriod=1)</div><div class="ttdoc">Sets a spike rate.</div><div class="ttdef"><b>Definition:</b> <a href="carlsim_8cpp_source.html#l01982">carlsim.cpp:1982</a></div></div>
<div class="ttc" id="aclassCARLsim_html_a6d6c298c788eeb7b18a19d82a77761b3"><div class="ttname"><a href="classCARLsim.html#a6d6c298c788eeb7b18a19d82a77761b3">CARLsim::setupNetwork</a></div><div class="ttdeci">void setupNetwork()</div><div class="ttdoc">build the network</div><div class="ttdef"><b>Definition:</b> <a href="carlsim_8cpp_source.html#l01914">carlsim.cpp:1914</a></div></div>
<div class="ttc" id="aclassCARLsim_html_aa6e1dc5ae50722ae3d693f2c963d84cd"><div class="ttname"><a href="classCARLsim.html#aa6e1dc5ae50722ae3d693f2c963d84cd">CARLsim::setNeuronParameters</a></div><div class="ttdeci">void setNeuronParameters(int grpId, float izh_a, float izh_a_sd, float izh_b, float izh_b_sd, float izh_c, float izh_c_sd, float izh_d, float izh_d_sd)</div><div class="ttdoc">Sets Izhikevich params a, b, c, and d with as mean +- standard deviation.</div><div class="ttdef"><b>Definition:</b> <a href="carlsim_8cpp_source.html#l01815">carlsim.cpp:1815</a></div></div>
<div class="ttc" id="aclassGroupMonitor_html"><div class="ttname"><a href="classGroupMonitor.html">GroupMonitor</a></div><div class="ttdoc">Class GroupMonitor.</div><div class="ttdef"><b>Definition:</b> <a href="group__monitor_8h_source.html#l00103">group_monitor.h:103</a></div></div>
<div class="ttc" id="acarlsim__datastructures_8h_html_a625c4eced5cd956404990e73f3950258a729ca642c452f8a7c53df4a48f240537"><div class="ttname"><a href="carlsim__datastructures_8h.html#a625c4eced5cd956404990e73f3950258a729ca642c452f8a7c53df4a48f240537">CPU_MODE</a></div><div class="ttdeci">@ CPU_MODE</div><div class="ttdoc">model is run on CPU core(s)</div><div class="ttdef"><b>Definition:</b> <a href="carlsim__datastructures_8h_source.html#l00114">carlsim_datastructures.h:114</a></div></div>
<div class="ttc" id="aclassCARLsim_html"><div class="ttname"><a href="classCARLsim.html">CARLsim</a></div><div class="ttdoc">CARLsim User Interface This class provides a user interface to the public sections of CARLsimCore sou...</div><div class="ttdef"><b>Definition:</b> <a href="carlsim_8h_source.html#l00137">carlsim.h:137</a></div></div>
<div class="ttc" id="aclassCARLsim_html_a30b16b93d57551dcde0559e8a4e98e27"><div class="ttname"><a href="classCARLsim.html#a30b16b93d57551dcde0559e8a4e98e27">CARLsim::connect</a></div><div class="ttdeci">short int connect(int grpId1, int grpId2, const std::string &amp;connType, const RangeWeight &amp;wt, float connProb, const RangeDelay &amp;delay=RangeDelay(1), const RadiusRF &amp;radRF=RadiusRF(-1.0), bool synWtType=SYN_FIXED, float mulSynFast=1.0f, float mulSynSlow=1.0f)</div><div class="ttdoc">Connects a presynaptic to a postsynaptic group using fixed/plastic weights and a range of delay value...</div><div class="ttdef"><b>Definition:</b> <a href="carlsim_8cpp_source.html#l01739">carlsim.cpp:1739</a></div></div>
<div class="ttc" id="acarlsim_8h_html"><div class="ttname"><a href="carlsim_8h.html">carlsim.h</a></div></div>
<div class="ttc" id="aclassCARLsim_html_a1e0b4d170b65f5075f1a996554c842ab"><div class="ttname"><a href="classCARLsim.html#a1e0b4d170b65f5075f1a996554c842ab">CARLsim::setSpikeMonitor</a></div><div class="ttdeci">SpikeMonitor * setSpikeMonitor(int grpId, const std::string &amp;fileName)</div><div class="ttdoc">Sets a Spike Monitor for a groups, prints spikes to binary file.</div><div class="ttdef"><b>Definition:</b> <a href="carlsim_8cpp_source.html#l01972">carlsim.cpp:1972</a></div></div>
<div class="ttc" id="aclassCARLsim_html_a6e11c10b6b079715074d857452c42e11"><div class="ttname"><a href="classCARLsim.html#a6e11c10b6b079715074d857452c42e11">CARLsim::createGroup</a></div><div class="ttdeci">int createGroup(const std::string &amp;grpName, int nNeur, int neurType, int preferredPartition=ANY, ComputingBackend preferredBackend=CPU_CORES)</div><div class="ttdoc">creates a group of Izhikevich spiking neurons</div><div class="ttdef"><b>Definition:</b> <a href="carlsim_8cpp_source.html#l01763">carlsim.cpp:1763</a></div></div>
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Sat Jul 11 2020 19:24:13 for CARLsim by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.18 </li>
  </ul>
</div>
</body>
</html>
