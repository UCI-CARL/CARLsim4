<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.18"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>CARLsim: Chapter 2: Basic Concepts</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="CARLsimStyles.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">CARLsim
   &#160;<span id="projectnumber">4.1.0</span>
   </div>
   <div id="projectbrief">CARLsim: a GPU-accelerated SNN simulator</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.18 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('ch2_basic_concepts.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Chapter 2: Basic Concepts </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#ch2s1_general_workflow">2.1 General Workflow</a><ul><li class="level2"><a href="#ch2s1s1_config">2.1.1 The CONFIG State</a></li>
<li class="level2"><a href="#ch2s1s2_setup">2.1.2 The SETUP State</a></li>
<li class="level2"><a href="#ch2s1s3_run">2.1.3 The RUN State</a></li>
</ul>
</li>
</ul>
</div>
<div class="textblock"><h1><a class="anchor" id="ch2s1_general_workflow"></a>
2.1 General Workflow</h1>
<dl class="section author"><dt>Author</dt><dd>Michael Beyeler</dd></dl>
<p>The workflow of a typical <a class="el" href="classCARLsim.html" title="CARLsim User Interface This class provides a user interface to the public sections of CARLsimCore sou...">CARLsim</a> 3 simulation is organized into three distinct, consecutive states (see figure below): the configuration state, the set up state, and the run state.</p>
<p>User functions in the C++ API are grouped according to these stages, which streamline the process and prevent race conditions. State transitions are handled by special user functions such as <a class="el" href="classCARLsim.html#a6d6c298c788eeb7b18a19d82a77761b3" title="build the network">CARLsim::setupNetwork</a> and <a class="el" href="classCARLsim.html#aafb2d44405c96aafe089f96ff867018d" title="run the simulation for time=(nSec*seconds + nMsec*milliseconds)">CARLsim::runNetwork</a>.</p>
<div class="image">
<img src="2_carlsim_states.jpg" alt=""/>
<div class="caption">
A diagram showing the possible states the CARLsim simulation can occupy.</div></div>
<p>The first step in using <a class="el" href="classCARLsim.html" title="CARLsim User Interface This class provides a user interface to the public sections of CARLsimCore sou...">CARLsim</a> 3 (<code>libCARLsim</code>) imports the library and instantiates the main simulation object: </p><div class="fragment"><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="carlsim_8h.html">carlsim.h</a>&gt;</span></div>
<div class="line"><a class="code" href="classCARLsim.html">CARLsim</a> sim(<span class="stringliteral">&quot;example&quot;</span>, <a class="code" href="carlsim__datastructures_8h.html#a625c4eced5cd956404990e73f3950258a0b5ee5e90bb225a562d92e4078ad9728">GPU_MODE</a>, <a class="code" href="carlsim__datastructures_8h.html#a3a04fc42e22f436d2b3809236cb6ec54ae2d30a195cee6b2961cc2c23ea4b520b">USER</a>);</div>
</div><!-- fragment --><p> This prepares the simulation for execution in either <a class="el" href="carlsim__datastructures_8h.html#a625c4eced5cd956404990e73f3950258a729ca642c452f8a7c53df4a48f240537" title="model is run on CPU core(s)">CPU_MODE</a> or <a class="el" href="carlsim__datastructures_8h.html#a625c4eced5cd956404990e73f3950258a0b5ee5e90bb225a562d92e4078ad9728" title="model is run on GPU card(s)">GPU_MODE</a>, and specifies the verbosity of the status reporting mechanism (<a class="el" href="carlsim__datastructures_8h.html#a3a04fc42e22f436d2b3809236cb6ec54ae2d30a195cee6b2961cc2c23ea4b520b" title="User mode, for experiment-oriented simulations.">USER</a> indicating the default logger mode that will print info and error messages to console and save debug messages in a text file). Other logger modes are available that print only error messages (<a class="el" href="carlsim__datastructures_8h.html#a3a04fc42e22f436d2b3809236cb6ec54ac4c7930129b4678a5a9a36033ef371e4" title="Showtime mode, will only output warnings and errors.">SHOWTIME</a>), suppress console output alltogether (<a class="el" href="carlsim__datastructures_8h.html#a3a04fc42e22f436d2b3809236cb6ec54ab9de27525b1cd54c353f4ed868a6cb26" title="Silent mode, no output is generated.">SILENT</a>), or allow to set custom file pointers for each message type (<a class="el" href="carlsim__datastructures_8h.html#a3a04fc42e22f436d2b3809236cb6ec54a945d6010d321d9fe75cbba7b6f37f3b5" title="Custom mode, the user can set the location of all the file pointers.">CUSTOM</a>).</p>
<p>The ability to run a network either on standard x86 CPUs (<a class="el" href="carlsim__datastructures_8h.html#a625c4eced5cd956404990e73f3950258a729ca642c452f8a7c53df4a48f240537" title="model is run on CPU core(s)">CPU_MODE</a>) or off-the-shelf NVIDIA GPUs (<a class="el" href="carlsim__datastructures_8h.html#a625c4eced5cd956404990e73f3950258a0b5ee5e90bb225a562d92e4078ad9728" title="model is run on GPU card(s)">GPU_MODE</a>) allow the user to exploit the advantages of both architectures. Whereas the CPU is more efficient for relatively small networks, the GPU is most advantageous fo rnetwork sizes of 10,000 neurons and up. In this regime, GPU mode should significantly outperform CPU mode (with roughly a factor of 20). On the other hand, CPU mode allows for execution of extremely large networks that would not fit within the GPU's memory.</p>
<p>In addition, the user may want to specify on which CUDA device to run the simulation. For this, the <a class="el" href="classCARLsim.html" title="CARLsim User Interface This class provides a user interface to the public sections of CARLsimCore sou...">CARLsim</a> constructor allows specification of a "device index" (<code>ithGPU</code>, which can be used in multi-GPU systems to specify on which CUDA device to establish context. For example, in order to run a network on the third GPU in the system (<code>ithGPU=2</code>, 0-indexed) and use random seed 42, the constructor should be called as follows: </p><div class="fragment"><div class="line"><a class="code" href="classCARLsim.html">CARLsim</a> sim(<span class="stringliteral">&quot;example&quot;</span>, <a class="code" href="carlsim__datastructures_8h.html#a625c4eced5cd956404990e73f3950258a0b5ee5e90bb225a562d92e4078ad9728">GPU_MODE</a>, <a class="code" href="carlsim__datastructures_8h.html#a3a04fc42e22f436d2b3809236cb6ec54ae2d30a195cee6b2961cc2c23ea4b520b">USER</a>, 2, 42);</div>
</div><!-- fragment --><p>From then on, the simulation is in <a class="el" href="carlsim__datastructures_8h.html#a8d0d24f2706656b1102c5e3624df65b2ac7fa385000dcb927a21b44bce4fbfca9" title="configuration state, where the neural network is configured">CONFIG_STATE</a>, allowing the properties of the neural network to be specified.</p>
<h2><a class="anchor" id="ch2s1s1_config"></a>
2.1.1 The CONFIG State</h2>
<dl class="section author"><dt>Author</dt><dd>Michael Beyeler</dd></dl>
<p>Similar to PyNN and many other simulation environments, <a class="el" href="classCARLsim.html" title="CARLsim User Interface This class provides a user interface to the public sections of CARLsimCore sou...">CARLsim</a> uses groups of neurons (see <a class="el" href="ch3_neurons_synapses_groups.html">Chapter 3: Neurons, Synapses, and Groups</a>) and connections (see <a class="el" href="ch4_connections.html">Chapter 4: Connections</a>) as an abstraction to aid defining synaptic connectivity. Different groups of neurons can be created from a one-dimensional array to a three-dimensional grid (see <a class="el" href="ch3_neurons_synapses_groups.html#ch3s3s2_topography">3.3.2 Topography</a>) via <a class="el" href="classCARLsim.html#a0bf4d12b0b90740faf9a2f6a4add0351" title="creates a spike generator group">CARLsim::createSpikeGeneratorGroup</a> or <a class="el" href="classCARLsim.html#a6e11c10b6b079715074d857452c42e11" title="creates a group of Izhikevich spiking neurons">CARLsim::createGroup</a>, and connections can be specified depending on the relative placement of neurons via <a class="el" href="classCARLsim.html#a30b16b93d57551dcde0559e8a4e98e27" title="Connects a presynaptic to a postsynaptic group using fixed/plastic weights and a range of delay value...">CARLsim::connect</a>. This allows for the creation of networks with complex spatial structure.</p>
<p>The present release allows users to choose from a number of synaptic plasticity mechanisms (see <a class="el" href="ch5_synaptic_plasticity.html">Chapter 5: Synaptic Plasticity</a>). These include standard equations for STP (see <a class="el" href="ch5_synaptic_plasticity.html#ch5s1_short_term_plasticity">5.1 Short-Term Plasticity (STP)</a>), various forms of nearest-neighbor STDP (see <a class="el" href="ch5_synaptic_plasticity.html#ch5s2_spike_timing_dependent_plasticity">5.2 Spike-Timing Dependent Plasticity (STDP)</a>), and homeostatic synaptic plasticity in the form of synaptic scaling (see <a class="el" href="ch5_synaptic_plasticity.html#ch5s3_homeostasis">5.3 Homeostasis</a>).</p>
<p>For a selective list of available function calls in <a class="el" href="carlsim__datastructures_8h.html#a8d0d24f2706656b1102c5e3624df65b2ac7fa385000dcb927a21b44bce4fbfca9" title="configuration state, where the neural network is configured">CONFIG_STATE</a>, please refer to the left-hand side of the above figure.</p>
<h2><a class="anchor" id="ch2s1s2_setup"></a>
2.1.2 The SETUP State</h2>
<dl class="section author"><dt>Author</dt><dd>Michael Beyeler</dd></dl>
<p>Once the spiking network has been specified, the function <a class="el" href="classCARLsim.html#a6d6c298c788eeb7b18a19d82a77761b3" title="build the network">CARLsim::setupNetwork</a> optimizes the network state for the chosen back-end (CPU or GPU) and moves the simulation into <a class="el" href="carlsim__datastructures_8h.html#a8d0d24f2706656b1102c5e3624df65b2a033f2f21470e4f79d5dc459619a6980c" title="setup state, where the neural network is prepared for execution and monitors are set">SETUP_STATE</a>.</p>
<p>In this state, a number of monitors (see <a class="el" href="ch7_monitoring.html">Chapter 7: Monitoring</a>) can be set up to record variables of interest (e.g., spikes, weights, state variables) in binary files for off-line analysis (see <a class="el" href="ch9_matlab_oat.html">Chapter 9: MATLAB Offline Analysis Toolbox (OAT)</a>). New in <a class="el" href="classCARLsim.html" title="CARLsim User Interface This class provides a user interface to the public sections of CARLsimCore sou...">CARLsim</a> 3 is a means to make these data available at run-time (without the computational overhead of writing data to disk), which can be queried for data in the <a class="el" href="carlsim__datastructures_8h.html#a8d0d24f2706656b1102c5e3624df65b2a67606f8f4ae6a12252ebcf0ddc2cc652" title="run state, where the model is stepped">RUN_STATE</a>.</p>
<p>For example, Spike Monitors can be used to record output spikes for different neuronal groups (see <a class="el" href="ch7_monitoring.html#ch7s1_spike_monitor">7.1 Spike Monitor</a>) either to a spike file (binary) or to a <a class="el" href="classSpikeMonitor.html" title="Class SpikeMonitor.">SpikeMonitor</a> object. The former is useful for off-line analysis of activity (e.g., using <a class="el" href="ch9_matlab_oat.html">Chapter 9: MATLAB Offline Analysis Toolbox (OAT)</a>). The latter is useful to calculate different spike metrics and statistics on-line, such as mean firing rate and standard deviation, or the number of neurons whose firing rate lies in a certain interval.</p>
<p>Similar monitors exist to record weights (see <a class="el" href="ch7_monitoring.html#ch7s2_connection_monitor">7.2 Connection Monitor</a>). More monitors will be added in the future.</p>
<h2><a class="anchor" id="ch2s1s3_run"></a>
2.1.3 The RUN State</h2>
<dl class="section author"><dt>Author</dt><dd>Michael Beyeler</dd></dl>
<p>The first call to <a class="el" href="classCARLsim.html#aafb2d44405c96aafe089f96ff867018d" title="run the simulation for time=(nSec*seconds + nMsec*milliseconds)">CARLsim::runNetwork</a> will take the simulation into <a class="el" href="carlsim__datastructures_8h.html#a8d0d24f2706656b1102c5e3624df65b2a67606f8f4ae6a12252ebcf0ddc2cc652" title="run state, where the model is stepped">RUN_STATE</a>. The simulation can be repeatedly run (or "stepped") for an arbitrary number of <code>sec</code>*1000 + <code>msec</code> milliseconds: </p><div class="fragment"><div class="line">sim.runNetwork(sec, msec);</div>
</div><!-- fragment --><p>Input can be generated via current injection (see <a class="el" href="ch6_input.html#ch6s2_generating_current">6.2 Generating Current</a>) or spike injection (see <a class="el" href="ch6_input.html#ch6s1_generating_spikes">6.1 Generating Spikes</a>). We also provide plug-in code to create Poisson spike trains from animated visual stimuli such as sinusoidal gratings, plaids, and random dot fiels via the <a class="el" href="classVisualStimulus.html" title="Class to integrate CARLsim with a stimulus created using VisualStimulus.m Version: 4/11/14 Author: Mi...">VisualStimulus</a> MATLAB toolbox (see <a class="el" href="ch6_input.html#ch6s3_visual_stimulus_toolbox">6.3 Visual Stimulus Toolbox</a>).</p>
<p>Once a network has reached <a class="el" href="carlsim__datastructures_8h.html#a8d0d24f2706656b1102c5e3624df65b2ac7fa385000dcb927a21b44bce4fbfca9" title="configuration state, where the neural network is configured">CONFIG_STATE</a> or <a class="el" href="carlsim__datastructures_8h.html#a8d0d24f2706656b1102c5e3624df65b2a67606f8f4ae6a12252ebcf0ddc2cc652" title="run state, where the model is stepped">RUN_STATE</a>, the network state can be stored in a file for later processing or for restoring a specific network (see <a class="el" href="ch8_saving_loading.html">Chapter 8: Saving and Loading</a>). The network state consists of all the synaptic connections, weights, delays, and whether the connections are plastic or fixed. Furthermore, the network can be stored after synaptic learning has occurred in order to externally analyze the learned synaptic patterns (for example, via a MATLAB <a class="el" href="classConnectionMonitor.html" title="Class ConnectionMonitor.">ConnectionMonitor</a>; see ch9s4_connection_monitor).</p>
<p>As more complex biological features are integrated into spiking network models, it becomes increasingly important to provide users with a method of tuning the large number of open parameters. To this end, <a class="el" href="classCARLsim.html" title="CARLsim User Interface This class provides a user interface to the public sections of CARLsimCore sou...">CARLsim</a> 3 provides a paramer tuning interface that uses evolutionary algorithms to optimize a generic fitness function (see <a class="el" href="ch10_ecj.html">Chapter 10: ECJ</a>). A more modest approach is to use the <a class="el" href="classSimpleWeightTuner.html" title="Class SimpleWeightTuner.">SimpleWeightTuner</a> utility that changes weights on-the-fly such that a certain group fires at a predefined target firing rate (see ch12s3_online_weight_tuning).</p>
<p>As mentioned before, once a network has been run, its activity and structure can be visualized using an Offline Analysis Toolbox (OAT) written in MATLAB (see <a class="el" href="ch9_matlab_oat.html">Chapter 9: MATLAB Offline Analysis Toolbox (OAT)</a>). In addition, the OAT provides means to access the saved data programmatically, and to store generated sequences of plots as an AVI file.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="tut1_basic_concepts.html">Tutorial 1: Basic Concepts</a> </dd></dl>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<div class="ttc" id="acarlsim__datastructures_8h_html_a625c4eced5cd956404990e73f3950258a0b5ee5e90bb225a562d92e4078ad9728"><div class="ttname"><a href="carlsim__datastructures_8h.html#a625c4eced5cd956404990e73f3950258a0b5ee5e90bb225a562d92e4078ad9728">GPU_MODE</a></div><div class="ttdeci">@ GPU_MODE</div><div class="ttdoc">model is run on GPU card(s)</div><div class="ttdef"><b>Definition:</b> <a href="carlsim__datastructures_8h_source.html#l00115">carlsim_datastructures.h:115</a></div></div>
<div class="ttc" id="acarlsim__datastructures_8h_html_a3a04fc42e22f436d2b3809236cb6ec54ae2d30a195cee6b2961cc2c23ea4b520b"><div class="ttname"><a href="carlsim__datastructures_8h.html#a3a04fc42e22f436d2b3809236cb6ec54ae2d30a195cee6b2961cc2c23ea4b520b">USER</a></div><div class="ttdeci">@ USER</div><div class="ttdoc">User mode, for experiment-oriented simulations.</div><div class="ttdef"><b>Definition:</b> <a href="carlsim__datastructures_8h_source.html#l00091">carlsim_datastructures.h:91</a></div></div>
<div class="ttc" id="aclassCARLsim_html"><div class="ttname"><a href="classCARLsim.html">CARLsim</a></div><div class="ttdoc">CARLsim User Interface This class provides a user interface to the public sections of CARLsimCore sou...</div><div class="ttdef"><b>Definition:</b> <a href="carlsim_8h_source.html#l00137">carlsim.h:137</a></div></div>
<div class="ttc" id="acarlsim_8h_html"><div class="ttname"><a href="carlsim_8h.html">carlsim.h</a></div></div>
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Sat Jul 11 2020 19:24:13 for CARLsim by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.18 </li>
  </ul>
</div>
</body>
</html>
