<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.18"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>CARLsim: Chapter 9: MATLAB Offline Analysis Toolbox (OAT)</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="CARLsimStyles.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">CARLsim
   &#160;<span id="projectnumber">4.1.0</span>
   </div>
   <div id="projectbrief">CARLsim: a GPU-accelerated SNN simulator</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.18 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('ch9_matlab_oat.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Chapter 9: MATLAB Offline Analysis Toolbox (OAT) </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#ch9s1_getting_started">9.1 Getting Started</a></li>
<li class="level1"><a href="#ch9s2_network_monitor">9.2 NetworkMonitor</a><ul><li class="level2"><a href="#ch9s2s1_create">9.2.1 Creating a NetworkMonitor</a></li>
<li class="level2"><a href="#ch9s2s2_setspikefileattributes">9.2.2 Setting the Spike File Attributes</a></li>
<li class="level2"><a href="#ch9s2s3_plot">9.2.3 Plotting Activity</a></li>
<li class="level2"><a href="#ch9s2s4_plot_types">9.2.4 NetworkMonitor Plot Types</a></li>
<li class="level2"><a href="#ch9s2s5_plot_attributes">9.2.5 NetworkMonitor Plotting Attributes</a></li>
<li class="level2"><a href="#ch9s3s6_record_movie">9.3.6 Recording a Movie</a></li>
<li class="level2"><a href="#ch9s2s7_record_attributes">9.2.7 NetworkMonitor Recording Attributes</a></li>
</ul>
</li>
<li class="level1"><a href="#ch9s3_group_monitor">9.3 GroupMonitor</a><ul><li class="level2"><a href="#ch9s3s1_create">9.3.1 Creating a GroupMonitor</a></li>
<li class="level2"><a href="#ch9s3s2_setspikefileattributes">9.3.2 Setting the Spike File Attributes</a></li>
<li class="level2"><a href="#ch9s3s3_plot">9.3.3 Plotting Activity</a></li>
<li class="level2"><a href="#ch9s3s4_plot_types">9.3.4 GroupMonitor Plot Types</a></li>
<li class="level2"><a href="#ch9s3s5_plot_attributes">9.3.5 GroupMonitor Plotting Attributes</a></li>
<li class="level2"><a href="#ch9s3s7_record_attributes">9.3.7 GroupMonitor Recording Attributes</a></li>
</ul>
</li>
<li class="level1"><a href="#ch9s4_connection_monitor">9.4 Connection Monitor</a><ul><li class="level2"><a href="#ch9s4s1_create">9.4.1 Creating a ConnectionMonitor</a></li>
<li class="level2"><a href="#ch9s4s2_setconnectfileattributes">9.4.2 Setting the Connect File Attributes</a></li>
<li class="level2"><a href="#ch9s4s3_plot">9.4.3 Plotting Weights</a></li>
<li class="level2"><a href="#ch9s4s4_plot_types">9.4.4 ConnectionMonitor Plot Types</a></li>
<li class="level2"><a href="#ch9s4s5_plot_attributes">9.4.5 ConnectionMonitor Plotting Attributes</a></li>
<li class="level2"><a href="#ch9s4s6_record_movie">9.4.6 Recording a Movie</a></li>
<li class="level2"><a href="#ch9s4s7_record_attributes">9.4.7 ConnectionMonitor Recording Attributes</a></li>
</ul>
</li>
<li class="level1"><a href="#ch9s5_reading_raw_data">9.5 Reading Raw Data</a><ul><li class="level2"><a href="#ch9s5s1_simulation_reader">9.5.1 Simulation Reader</a></li>
<li class="level2"><a href="#ch9s5s2_spike_reader">9.5.2 Spike Reader</a></li>
<li class="level2"><a href="#ch9s5s3_connection_reader">9.5.3 Connection Reader</a></li>
</ul>
</li>
<li class="level1"><a href="#ch9s6_migrating_scripts">9.6 Migrating from CARLsim 2.2</a></li>
</ul>
</div>
<div class="textblock"><p>In addition to the real-time monitors (see <a class="el" href="ch7_monitoring.html">Chapter 7: Monitoring</a>), <a class="el" href="classCARLsim.html" title="CARLsim User Interface This class provides a user interface to the public sections of CARLsimCore sou...">CARLsim</a> provides a versatile Offline Analysis Toolbox (OAT) written in MATLAB for the visualization and analysis of neuronal, synaptic, and network information.</p>
<p>The OAT is built to work straight out of the box, by operating on binary files that the <a class="el" href="classCARLsim.html" title="CARLsim User Interface This class provides a user interface to the public sections of CARLsimCore sou...">CARLsim</a> simulation creates by default. The easiest way to visualize network activity is to run a NetworkMonitor (see <a class="el" href="ch9_matlab_oat.html#ch9s2_network_monitor">9.2 NetworkMonitor</a>). However, it is also possible to look at specific groups (see <a class="el" href="ch9_matlab_oat.html#ch9s3_group_monitor">9.3 GroupMonitor</a>) or connections (see <a class="el" href="ch9_matlab_oat.html#ch9s4_connection_monitor">9.4 Connection Monitor</a>), and to access the associated spike file binaries (see <a class="el" href="ch9_matlab_oat.html#ch9s5s2_spike_reader">9.5.2 Spike Reader</a>) and weight file binaries (see <a class="el" href="ch9_matlab_oat.html#ch9s5s3_connection_reader">9.5.3 Connection Reader</a>) directly.</p>
<p>Every Monitor comes with an InteractiveMode for plotting activity and weights over time, which allows the use of keyboard commands to step through frames, pause or quit (see <a class="el" href="ch9_matlab_oat.html#ch9s2s3_plot">9.2.3 Plotting Activity</a>, <a class="el" href="ch9_matlab_oat.html#ch9s3s3_plot">9.3.3 Plotting Activity</a>, and <a class="el" href="ch9_matlab_oat.html#ch9s4s3_plot">9.4.3 Plotting Weights</a>).</p>
<p>Every Monitor also provides a whole range of settings to customize the plotting (see <a class="el" href="ch9_matlab_oat.html#ch9s2s5_plot_attributes">9.2.5 NetworkMonitor Plotting Attributes</a>, <a class="el" href="ch9_matlab_oat.html#ch9s3s5_plot_attributes">9.3.5 GroupMonitor Plotting Attributes</a>, and <a class="el" href="ch9_matlab_oat.html#ch9s4s5_plot_attributes">9.4.5 ConnectionMonitor Plotting Attributes</a>) or recording (see <a class="el" href="ch9_matlab_oat.html#ch9s2s7_record_attributes">9.2.7 NetworkMonitor Recording Attributes</a>, <a class="el" href="ch9_matlab_oat.html#ch9s3s7_record_attributes">9.3.7 GroupMonitor Recording Attributes</a>, or <a class="el" href="ch9_matlab_oat.html#ch9s4s7_record_attributes">9.4.7 ConnectionMonitor Recording Attributes</a>) of activity and weights.</p>
<p>For users migrating from <a class="el" href="classCARLsim.html" title="CARLsim User Interface This class provides a user interface to the public sections of CARLsimCore sou...">CARLsim</a> 2.2, please note that <code>readNetwork.m</code> has been replaced with NetworkMonitors (see <a class="el" href="ch9_matlab_oat.html#ch9s2_network_monitor">9.2 NetworkMonitor</a>) and <code>readSpikes.m</code> has been replaced with Spike Readers (see <a class="el" href="ch9_matlab_oat.html#ch9s5s2_spike_reader">9.5.2 Spike Reader</a>). For more information please refer to <a class="el" href="ch9_matlab_oat.html#ch9s6_migrating_scripts">9.6 Migrating from CARLsim 2.2</a>.</p>
<h1><a class="anchor" id="ch9s1_getting_started"></a>
9.1 Getting Started</h1>
<dl class="section author"><dt>Author</dt><dd>Michael Beyeler</dd></dl>
<p>Before the OAT can be used, the directory "tools/offline_analysis_toolbox" must be added to the MATLAB path.</p>
<p>The "Hello World" project (see <a class="el" href="ch1_getting_started.html#ch1s3_project_workflow">1.3 Project Workflow</a>) provides a short MATLAB script for this in the <code>scripts</code> subdirectory: </p><div class="fragment"><div class="line">&gt;&gt; initOAT     % adds OAT relative path to MATLAB paths</div>
</div><!-- fragment --><p>Alternatively, the path can be added manually, making changes either permanent by using the MATLAB path tool: </p><div class="fragment"><div class="line">&gt;&gt; pathtool</div>
</div><!-- fragment --><p> and selecting the directory <code>%%CARLSIM_ROOT_DIR%%/tools/offline_analysis_toolbox</code>, or just for the current session by explicitly running: </p><div class="fragment"><div class="line">&gt;&gt; addpath <span class="stringliteral">&quot;%%CARLSIM_ROOT_DIR%%/tools/offline_analysis_toolbox&quot;</span></div>
</div><!-- fragment --><p>Now it should be possible to display the code documentation for different classes by using MATLAB's help browser: </p><div class="fragment"><div class="line">&gt;&gt; doc NetworkMonitor       % open help browser <span class="keywordflow">for</span> NetworkMonitor <span class="keyword">class</span></div>
</div><!-- fragment --><h1><a class="anchor" id="ch9s2_network_monitor"></a>
9.2 NetworkMonitor</h1>
<dl class="section author"><dt>Author</dt><dd>Michael Beyeler</dd></dl>
<p>A NetworkMonitor can be used to monitor properties as well as the activity of a number of neuronal groups in a network. The monitor will parse a simulation file of the form <code>sim_{name of network}.dat</code> that is automatically generated by a <a class="el" href="classCARLsim.html" title="CARLsim User Interface This class provides a user interface to the public sections of CARLsimCore sou...">CARLsim</a> simulation, determine the network structure (such as number of groups and connections), find all associated spike files, and plot group activity accordingly.</p>
<p>The following methods are available: </p><div class="fragment"><div class="line">&gt;&gt; methods NetworkMonitor</div>
<div class="line"> </div>
<div class="line">addAllGroupsFromFile      % registers all groups specified in the simulation file</div>
<div class="line">addGroup                  % registers a specific group</div>
<div class="line">getError                  % returns the current error status (flag and message)</div>
<div class="line">getGroupGrid3D            % returns the <a class="code" href="structGrid3D.html">Grid3D</a> dimensions of a group</div>
<div class="line">getGroupNumNeurons        % returns the number of neurons in a group</div>
<div class="line">plot                      % plots data in current figure/axes</div>
<div class="line">recordMovie               % records data from current figure/axes to AVI movie file</div>
<div class="line">setErrorMode              % set error mode (<span class="stringliteral">&#39;standard&#39;</span>, <span class="stringliteral">&#39;warning&#39;</span>, <span class="stringliteral">&#39;silent&#39;</span>)</div>
<div class="line">setGroupGrid3D            % set the <a class="code" href="structGrid3D.html">Grid3D</a> dimensions of a group (for plotting and recording)</div>
<div class="line">setGroupPlotType          % set default plot type of a group (raster plot, flow field, etc.)</div>
<div class="line">setGroupSubPlot           % sets the subplot in which to plot a group&#39;s activity</div>
<div class="line">setPlottingAttributes     % settings for customizing the plotting process</div>
<div class="line">setRecordingAttributes    % settings for customizing the recording process (to AVI file)</div>
<div class="line">setSpikeFileAttributes    % set prefix/suffix of spike file naming template</div>
</div><!-- fragment --><p>The following public members (properties) are available: </p><div class="fragment"><div class="line">&gt;&gt; properties NetworkMonitor</div>
<div class="line"> </div>
<div class="line">simObj                    % SimulationReader <span class="keywordtype">object</span></div>
<div class="line">resultsFolder             % path to results folder</div>
<div class="line">groupNames                % list of group names</div>
<div class="line">groupSubPlots             % list of subplots <span class="keywordflow">for</span> all groups</div>
<div class="line">groupMonObj               % list of <a class="code" href="classGroupMonitor.html">GroupMonitor</a> objects <span class="keywordflow">for</span> all groups</div>
<div class="line">errorMode                 % current error mode</div>
<div class="line">supportedErrorModes       % list of supported error modes</div>
</div><!-- fragment --><h2><a class="anchor" id="ch9s2s1_create"></a>
9.2.1 Creating a NetworkMonitor</h2>
<p>In order to open a NetworkMonitor, specify the path to a simulation file (of the form <code>sim_{network name}.dat</code>) that has been created automatically during a <a class="el" href="classCARLsim.html" title="CARLsim User Interface This class provides a user interface to the public sections of CARLsimCore sou...">CARLsim</a> simulation, or by explicitly calling <a class="el" href="classCARLsim.html#a3b08150d9a98f80df57852450c0d87ed" title="Saves important simulation and network infos to file.">CARLsim::saveSimulation</a>: </p><div class="fragment"><div class="line">&gt;&gt; NM = NetworkMonitor(<span class="stringliteral">&#39;results/sim_random.dat&#39;</span>)</div>
<div class="line"> </div>
<div class="line">NM =</div>
<div class="line"> </div>
<div class="line">                 simObj: [1x1 SimulationReader]</div>
<div class="line">          resultsFolder: &#39;results&#39;</div>
<div class="line">             groupNames: {<span class="stringliteral">&#39;excit&#39;</span>  <span class="stringliteral">&#39;inhib&#39;</span>  <span class="stringliteral">&#39;input&#39;</span>}</div>
<div class="line">          groupSubPlots: {[1]  [2]  [3]}</div>
<div class="line">            groupMonObj: {[1x1 <a class="code" href="classGroupMonitor.html">GroupMonitor</a>]  [1x1 <a class="code" href="classGroupMonitor.html">GroupMonitor</a>]  [1x1 <a class="code" href="classGroupMonitor.html">GroupMonitor</a>]}</div>
<div class="line">              errorMode: <span class="stringliteral">&#39;standard&#39;</span></div>
<div class="line">    supportedErrorModes: {<span class="stringliteral">&#39;standard&#39;</span>  <span class="stringliteral">&#39;warning&#39;</span>  <span class="stringliteral">&#39;silent&#39;</span>}</div>
</div><!-- fragment --><p> The NetworkMonitor will use a SimulationReader (see <a class="el" href="ch9_matlab_oat.html#ch9s5s1_simulation_reader">9.5.1 Simulation Reader</a>) to parse the simulation file <code>results/sim_random.dat</code>, and open a <a class="el" href="classGroupMonitor.html" title="Class GroupMonitor.">GroupMonitor</a> (see <a class="el" href="ch9_matlab_oat.html#ch9s3_group_monitor">9.3 GroupMonitor</a>) on each group that was specified therein. The resulting NetworkMonitor object should contain a list of all groups in the network (see public member <code>groupNames</code>) with associated <a class="el" href="classGroupMonitor.html" title="Class GroupMonitor.">GroupMonitor</a> objects (see public member <code>groupMonObj</code>) and associated subplots (see public member <code>groupSubPlots</code>).</p>
<p>In order to find the list of all associated groups, the NetworkMonitor constructor will implicitly call the public method <code>addAllGroupsFromFile</code>. Alternatively, the user can opt not to automatically add all groups from file, by setting input argument <code>loadGroupsFromFile</code> to <code>false</code>: </p><div class="fragment"><div class="line">&gt;&gt; NM = NetworkMonitor(<span class="stringliteral">&#39;results/sim_random.dat&#39;</span>, <span class="keyword">false</span>) % loadGroupsFromFile</div>
<div class="line"> </div>
<div class="line">NM =</div>
<div class="line">                 simObj: [1x1 SimulationReader]</div>
<div class="line">          resultsFolder: <span class="stringliteral">&#39;results&#39;</span></div>
<div class="line">             groupNames: {}</div>
<div class="line">          groupSubPlots: {}</div>
<div class="line">            groupMonObj: {}</div>
<div class="line">              errorMode: <span class="stringliteral">&#39;standard&#39;</span></div>
<div class="line">    supportedErrorModes: {<span class="stringliteral">&#39;standard&#39;</span>  <span class="stringliteral">&#39;warning&#39;</span>  <span class="stringliteral">&#39;silent&#39;</span>}</div>
</div><!-- fragment --><p> Groups to be included in a NetworkMonitor plot can then be added one-by-one via <code>addGroup</code>. This allows to directly specify additional attributes such as plot type, <a class="el" href="structGrid3D.html" title="A struct to arrange neurons on a 3D grid (a primitive cubic Bravais lattice with cubic side length 1)">Grid3D</a> dimensions, which subplot to occupy, etc.: </p><div class="fragment"><div class="line">&gt;&gt; NM.addGroup(<span class="stringliteral">&#39;input&#39;</span>, <span class="stringliteral">&#39;heatmap&#39;</span>, [10 10 1]); % name, plotType, grid3D</div>
<div class="line">&gt;&gt; NM.addGroup(<span class="stringliteral">&#39;output&#39;</span>, <span class="stringliteral">&#39;raster&#39;</span>); % name</div>
</div><!-- fragment --><p> Note that the name strings must match the name the group was given during the <a class="el" href="classCARLsim.html" title="CARLsim User Interface This class provides a user interface to the public sections of CARLsimCore sou...">CARLsim</a> simulation, and the <a class="el" href="structGrid3D.html" title="A struct to arrange neurons on a 3D grid (a primitive cubic Bravais lattice with cubic side length 1)">Grid3D</a> dimensions must add up to the correct total number of neurons in the group </p><dl class="section since"><dt>Since</dt><dd>v3.0</dd></dl>
<h2><a class="anchor" id="ch9s2s2_setspikefileattributes"></a>
9.2.2 Setting the Spike File Attributes</h2>
<p>In case the spike files do not follow the default pattern, NetworkMonitor will not be able to locate the spike files, which will be evident by an empty list of <code>groupNames</code>, <code>groupSubPlots</code>, and <code>groupMonObj</code>: </p><div class="fragment"><div class="line">&gt;&gt; NM = NetworkMonitor(<span class="stringliteral">&#39;results/sim_random.dat&#39;</span>, <span class="keyword">false</span>) % loadGroupsFromFile</div>
<div class="line"> </div>
<div class="line">NM =</div>
<div class="line"> </div>
<div class="line">                 simObj: [1x1 SimulationReader]</div>
<div class="line">          resultsFolder: <span class="stringliteral">&#39;results&#39;</span></div>
<div class="line">             groupNames: {}</div>
<div class="line">          groupSubPlots: {}</div>
<div class="line">            groupMonObj: {}</div>
<div class="line">              errorMode: <span class="stringliteral">&#39;standard&#39;</span></div>
<div class="line">    supportedErrorModes: {<span class="stringliteral">&#39;standard&#39;</span>  <span class="stringliteral">&#39;warning&#39;</span>  <span class="stringliteral">&#39;silent&#39;</span>}</div>
</div><!-- fragment --><p> and trying to call the <code>plot</code> method will result in a warning: </p><div class="fragment"><div class="line">&gt;&gt; NM.plot</div>
<div class="line">Warning: Nothing to plot. Try adding some groups first.</div>
</div><!-- fragment --><p>In this case, the method <code>setSpikeFileAttributes</code> can be used to change the default prefix and suffix of the spike file names. By default, spike files follow the pattern <code>spk_{group name}.dat</code>, so the prefix would be <code>spk_</code> and the suffix would be <code>.dat</code>, as dictated by the <a class="el" href="classGroupMonitor.html" title="Class GroupMonitor.">GroupMonitor</a> object (see <a class="el" href="ch9_matlab_oat.html#ch9s3s2_setspikefileattributes">9.3.2 Setting the Spike File Attributes</a>). Analogously, for spike files following the naming convention <code>spike_{group name}.ext</code> the prefix would be <code>spike_</code> and the suffix would be <code>.ext</code>. After prefix/suffix have been set accordingly, the spike file will be found and activity can be plotted: </p><div class="fragment"><div class="line">&gt;&gt; NM</div>
<div class="line">                 simObj: [1x1 SimulationReader]</div>
<div class="line">          resultsFolder: <span class="stringliteral">&#39;results&#39;</span></div>
<div class="line">             groupNames: {}</div>
<div class="line">          groupSubPlots: {}</div>
<div class="line">            groupMonObj: {}</div>
<div class="line">              errorMode: <span class="stringliteral">&#39;standard&#39;</span></div>
<div class="line">    supportedErrorModes: {<span class="stringliteral">&#39;standard&#39;</span>  <span class="stringliteral">&#39;warning&#39;</span>  <span class="stringliteral">&#39;silent&#39;</span>}</div>
<div class="line"> </div>
<div class="line">&gt;&gt; NM.setSpikeFileAttributes(<span class="stringliteral">&#39;spike_&#39;</span>,<span class="stringliteral">&#39;.ext&#39;</span>);</div>
<div class="line">&gt;&gt; NM.addAllGroupsFromFile();</div>
<div class="line">&gt;&gt; NM</div>
<div class="line"> </div>
<div class="line">NM =</div>
<div class="line"> </div>
<div class="line">                 simObj: [1x1 SimulationReader]</div>
<div class="line">          resultsFolder: <span class="stringliteral">&#39;results&#39;</span></div>
<div class="line">             groupNames: {<span class="stringliteral">&#39;excit&#39;</span>  <span class="stringliteral">&#39;inhib&#39;</span>  <span class="stringliteral">&#39;input&#39;</span>}</div>
<div class="line">          groupSubPlots: {[1]  [2]  [3]}</div>
<div class="line">            groupMonObj: {[1x1 <a class="code" href="classGroupMonitor.html">GroupMonitor</a>]  [1x1 <a class="code" href="classGroupMonitor.html">GroupMonitor</a>]  [1x1 <a class="code" href="classGroupMonitor.html">GroupMonitor</a>]}</div>
<div class="line">              errorMode: <span class="stringliteral">&#39;standard&#39;</span></div>
<div class="line">    supportedErrorModes: {<span class="stringliteral">&#39;standard&#39;</span>  <span class="stringliteral">&#39;warning&#39;</span>  <span class="stringliteral">&#39;silent&#39;</span>}</div>
</div><!-- fragment --> <dl class="section since"><dt>Since</dt><dd>v3.0</dd></dl>
<h2><a class="anchor" id="ch9s2s3_plot"></a>
9.2.3 Plotting Activity</h2>
<p>Once a NetworkMonitor has been set up, activity can be plotted using the <code>plot</code> method: </p><div class="fragment"><div class="line">&gt;&gt; NM.plot</div>
</div><!-- fragment --><p> This will plot the data in bins of 1000 ms in the current figure/axes, one group per subplot, using a default plot type, which is determined by the <a class="el" href="structGrid3D.html" title="A struct to arrange neurons on a 3D grid (a primitive cubic Bravais lattice with cubic side length 1)">Grid3D</a> dimensions of each group (see <a class="el" href="ch9_matlab_oat.html#ch9s2s4_plot_types">9.2.4 NetworkMonitor Plot Types</a> and <a class="el" href="ch9_matlab_oat.html#ch9s3s4_plot_types">9.3.4 GroupMonitor Plot Types</a>). An example is shown in the figure below.</p>
<div class="image">
<img src="9_nm_example.jpg" alt=""/>
<div class="caption">
Example NetworkMonitor plot with all raster plots.</div></div>
<p>A list of frames to be plotted as well as the histogram bin window (ms) can be specified directly. For example, the following command would bin the data into frames 500 ms length, and display the first, second, and eighth frame using default plot types for each group: </p><div class="fragment"><div class="line">&gt;&gt; NM.plot([1 2 8],500);</div>
</div><!-- fragment --><p>The default plot type for each group can be changed via <code>setGroupPlotType</code>: </p><div class="fragment"><div class="line">&gt;&gt; NM.setGroupPlotType(<span class="stringliteral">&#39;excit&#39;</span>,<span class="stringliteral">&#39;raster&#39;</span>);  % plotting activity of group <span class="stringliteral">&quot;excit&quot;</span> as raster plot</div>
<div class="line">&gt;&gt; NM.setGroupPlotType(<span class="stringliteral">&#39;inhib&#39;</span>,<span class="stringliteral">&#39;heatmap&#39;</span>); % plotting activity of group <span class="stringliteral">&quot;inhib&quot;</span> as heat map</div>
</div><!-- fragment --><p> Plot types are managed by the <a class="el" href="classGroupMonitor.html" title="Class GroupMonitor.">GroupMonitor</a> object. For a list of available plot types, please refer to <a class="el" href="ch9_matlab_oat.html#ch9s2s4_plot_types">9.2.4 NetworkMonitor Plot Types</a>.</p>
<p>Every Monitor comes with an InteractiveMode for plotting activity and weights. By default, plotting will occur at a predefined speed (5 frames per second), unless otherwise specified using the method <code>setPlottingAttributes</code> (see <a class="el" href="ch9_matlab_oat.html#ch9s2s5_plot_attributes">9.2.5 NetworkMonitor Plotting Attributes</a>). At any time, the user can hit key 'p' to pause plotting, or 'q' to quit. Hitting key 's' will enter stepping mode, which will freeze the current frame until the user either hits the 'right arrow' key (in order to step one frame forward) or the 'left arrow' key (in order to step one frame backward).</p>
<p>A number of additional plotting attributes can be set via <code>setPlottingAttributes</code>, such as the background color of the figure and the number of frames to be displayed per second (see <a class="el" href="ch9_matlab_oat.html#ch9s2s5_plot_attributes">9.2.5 NetworkMonitor Plotting Attributes</a>).</p>
<p>Certain plot types, such as <code>'heatmap'</code> or <code>'flowfield'</code> depend on appropriate <a class="el" href="structGrid3D.html" title="A struct to arrange neurons on a 3D grid (a primitive cubic Bravais lattice with cubic side length 1)">Grid3D</a> dimensions (2D for the former, 3D for the latter). For example, the heatmap of a population with 100 neurons on a 100x1x1 grid will be a single row. But, the grid dimensions can be reshaped on-the-fly, to make them easier to visualize: </p><div class="fragment"><div class="line">&gt;&gt; NM.setGroupGrid3D(<span class="stringliteral">&#39;excit&#39;</span>,10,10,1);   % reshape 100x1x1 grid into 10x10x1 grid</div>
<div class="line">&gt;&gt; NM.setGroupPlotType(<span class="stringliteral">&#39;excit&#39;</span>,<span class="stringliteral">&#39;heatmap&#39;</span>);</div>
</div><!-- fragment --><p> Note that the overall number of neurons must not change when specifying new grid dimensions.</p>
<p>Sometimes it is useful to manually assign subplots to each group, especially for groups whose 2D grid representations are relatively wide or tall (e.g., 5x100 neurons). In this case, <code>setGroupSubPlots</code> can be used to make a group plot span across multiple subplots: </p><div class="fragment"><div class="line">&gt;&gt; NM.setGroupGrid3D(<span class="stringliteral">&#39;excit&#39;</span>, 5, 100, 1)    % 2D representation extremely wide</div>
<div class="line">&gt;&gt; NM.setGroupSubPlot(<span class="stringliteral">&#39;excit&#39;</span>, [1 2])       % make <span class="stringliteral">&quot;excit&quot;</span> span two subplots</div>
</div><!-- fragment --><p> By default, each group gets assigned just one subplot. Make sure that each subplot is occupied by at most one group, otherwise the <code>plot</code> method will break.</p>
<p>The raw data of a spike file can also be read directly using a SpikeReader (see <a class="el" href="ch9_matlab_oat.html#ch9s5s2_spike_reader">9.5.2 Spike Reader</a>). </p><dl class="section see"><dt>See also</dt><dd><a class="el" href="ch9_matlab_oat.html#ch9s2s4_plot_types">9.2.4 NetworkMonitor Plot Types</a> </dd>
<dd>
<a class="el" href="ch9_matlab_oat.html#ch9s2s5_plot_attributes">9.2.5 NetworkMonitor Plotting Attributes</a> </dd>
<dd>
<a class="el" href="ch9_matlab_oat.html#ch9s5s2_spike_reader">9.5.2 Spike Reader</a> </dd></dl>
<dl class="section since"><dt>Since</dt><dd>v3.0</dd></dl>
<h2><a class="anchor" id="ch9s2s4_plot_types"></a>
9.2.4 NetworkMonitor Plot Types</h2>
<p>NetworkMonitor follows the plot types that are specified and managed by <a class="el" href="classGroupMonitor.html" title="Class GroupMonitor.">GroupMonitor</a>. For a complete list of available plot types, please refer to <a class="el" href="ch9_matlab_oat.html#ch9s3s4_plot_types">9.3.4 GroupMonitor Plot Types</a>.</p>
<p>Plot types can be mixed-and-matched within a NetworkMonitor plot. For example, a network containing three groups "excit", "inhib", and "input" might be visualized with three different types: </p><div class="fragment"><div class="line">&gt;&gt; NM = NetworkMonitor(<span class="stringliteral">&#39;results/sim_random.dat&#39;</span>)</div>
<div class="line"> </div>
<div class="line">NM =</div>
<div class="line"> </div>
<div class="line">                 simObj: [1x1 SimulationReader]</div>
<div class="line">          resultsFolder: &#39;results&#39;</div>
<div class="line">             groupNames: {<span class="stringliteral">&#39;excit&#39;</span>  <span class="stringliteral">&#39;inhib&#39;</span>  <span class="stringliteral">&#39;input&#39;</span>}</div>
<div class="line">          groupSubPlots: {[1]  [2]  [3]}</div>
<div class="line">            groupMonObj: {[1x1 <a class="code" href="classGroupMonitor.html">GroupMonitor</a>]  [1x1 <a class="code" href="classGroupMonitor.html">GroupMonitor</a>]  [1x1 <a class="code" href="classGroupMonitor.html">GroupMonitor</a>]}</div>
<div class="line">              errorMode: <span class="stringliteral">&#39;standard&#39;</span></div>
<div class="line">    supportedErrorModes: {<span class="stringliteral">&#39;standard&#39;</span>  <span class="stringliteral">&#39;warning&#39;</span>  <span class="stringliteral">&#39;silent&#39;</span>}</div>
<div class="line"> </div>
<div class="line">&gt;&gt; NM.setGroupPlotType(<span class="stringliteral">&#39;excit&#39;</span>,<span class="stringliteral">&#39;histogram&#39;</span>)  % plot <span class="stringliteral">&quot;excit&quot;</span> as histogram</div>
<div class="line">&gt;&gt; NM.setGroupPlotType(<span class="stringliteral">&#39;inhib&#39;</span>,<span class="stringliteral">&#39;flowfield&#39;</span>)  % plot <span class="stringliteral">&quot;inhib&quot;</span> as flow field</div>
<div class="line">&gt;&gt; NM.setGroupGrid3D(<span class="stringliteral">&#39;inhib&#39;</span>, 20, 20, 4)     % make sure group <span class="stringliteral">&quot;inhib&quot;</span> has the right dimensions</div>
<div class="line">&gt;&gt; NM.setGroupPlotType(<span class="stringliteral">&#39;input&#39;</span>,<span class="stringliteral">&#39;raster&#39;</span>)     % plot <span class="stringliteral">&quot;input&quot;</span> as raster plot</div>
</div><!-- fragment --><p> The result of this code snippet is shown in the figure below.</p>
<div class="image">
<img src="9_nm_plottypes.jpg" alt=""/>
<div class="caption">
Example NetworkMonitor plot with mixed plot types.</div></div>
<dl class="section note"><dt>Note</dt><dd>Make sure the <a class="el" href="structGrid3D.html" title="A struct to arrange neurons on a 3D grid (a primitive cubic Bravais lattice with cubic side length 1)">Grid3D</a> dimensions are appropriate for the current plot type (change dimensions via <code>setGrid3D</code>). </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="ch9_matlab_oat.html#ch9s3s4_plot_types">9.3.4 GroupMonitor Plot Types</a> </dd></dl>
<dl class="section since"><dt>Since</dt><dd>v3.0</dd></dl>
<h2><a class="anchor" id="ch9s2s5_plot_attributes"></a>
9.2.5 NetworkMonitor Plotting Attributes</h2>
<p>The method <code>setPlottingAttributes(varargin)</code> can be used to set default plotting attributes. These default settings will apply to all activity plots, unless their values are overwritten explicitly in the <code>plot</code> method (see <a class="el" href="ch9_matlab_oat.html#ch9s2s3_plot">9.2.3 Plotting Activity</a>).</p>
<p>The following command sets the value of variable <code>propertyName1</code> to value <code>value1</code>: </p><div class="fragment"><div class="line">&gt;&gt; NM.setPlottingAttributes(<span class="stringliteral">&#39;propertyName1&#39;</span>,value1);</div>
</div><!-- fragment --><p> Additional variables can be flexibly appended; order or capitalization does not matter. A list of available attributes can be displayed via: </p><div class="fragment"><div class="line">&gt;&gt; help NetworkMonitor.setPlottingAttributes</div>
<div class="line"> </div>
<div class="line">NM.setPlottingAttributes(varargin) can be used to set <span class="keywordflow">default</span></div>
<div class="line">settings that will apply to all activity plots.</div>
<div class="line">This <span class="keyword">function</span> provides control over additional attributes</div>
<div class="line">that are not available as input arguments to GM.plot or</div>
<div class="line">NM.plotFrame.</div>
<div class="line">NM.setPlottingAttributes(<span class="stringliteral">&#39;propertyName1&#39;</span>,value1,...) sets the</div>
<div class="line">value of <span class="stringliteral">&#39;propertyName1&#39;</span> to value1.</div>
<div class="line"> </div>
<div class="line">Calling the <span class="keyword">function</span> without input arguments will restore the</div>
<div class="line"><span class="keywordflow">default</span> settings.</div>
<div class="line"> </div>
<div class="line">BGCOLOR        - Set background color <span class="keywordflow">for</span> figure. Must be of</div>
<div class="line">                 type ColorSpec (<span class="keywordtype">char</span> such as <span class="charliteral">&#39;w&#39;</span>,<span class="charliteral">&#39;b&#39;</span>,<span class="charliteral">&#39;k&#39;</span> or</div>
<div class="line">                  a 3-element vector <span class="keywordflow">for</span> RGB channels). The</div>
<div class="line">                 <span class="keywordflow">default</span> is white.</div>
<div class="line">BINWINDOWMS    - The binning window (ms) in which the data</div>
<div class="line">                 will be displayed. Default: 1000.</div>
<div class="line">DISPFRAMENR    - A <span class="keywordtype">boolean</span> flag that indicates whether to</div>
<div class="line">                 display the frame number. Default: <span class="keyword">true</span>.</div>
<div class="line">FPS            - The frames per second <span class="keywordflow">for</span> the plotting loop.</div>
<div class="line">                 The <span class="keywordflow">default</span> is 5.</div>
<div class="line">BINWINDOWMS    - The binning window (ms) in which the data</div>
<div class="line">                 will be displayed. Default: 1000.</div>
</div><!-- fragment --> <dl class="section since"><dt>Since</dt><dd>v3.0</dd></dl>
<h2><a class="anchor" id="ch9s3s6_record_movie"></a>
9.3.6 Recording a Movie</h2>
<p>Activity plots can be directly saved to AVI movie files via the following command: </p><div class="fragment"><div class="line">&gt;&gt; NM.recordMovie;</div>
</div><!-- fragment --><p>This will generate a default NetworkMonitor plot (see <a class="el" href="ch9_matlab_oat.html#ch9s2s3_plot">9.2.3 Plotting Activity</a>) and save the frames to an <code>.avi</code> binary using the MATLAB <code>VideoWriter</code> utility.</p>
<p>The following command will generate file called <code>myMovie.avi</code> that shows group activity with default plot types, binning window 500 ms, and display the first, second, and eighth frame at a playback rate of 1 fps: </p><div class="fragment"><div class="line">&gt;&gt; GM.recordMovie(<span class="stringliteral">&#39;myMovie.avi&#39;</span>, [1 2 8], 500, 1);</div>
<div class="line">created file <span class="stringliteral">&quot;myMovie.avi&quot;</span></div>
</div><!-- fragment --><p> Plot types for each group can be set via <code>setGroupPlotType</code> (see <a class="el" href="ch9_matlab_oat.html#ch9s2s4_plot_types">9.2.4 NetworkMonitor Plot Types</a>).</p>
<dl class="section note"><dt>Note</dt><dd>Make sure the <a class="el" href="structGrid3D.html" title="A struct to arrange neurons on a 3D grid (a primitive cubic Bravais lattice with cubic side length 1)">Grid3D</a> dimensions are appropriate for the current plot type (change dimensions via <code>setGrid3D</code>). </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="ch9_matlab_oat.html#ch9s2s7_record_attributes">9.2.7 NetworkMonitor Recording Attributes</a> </dd></dl>
<dl class="section since"><dt>Since</dt><dd>v3.0</dd></dl>
<h2><a class="anchor" id="ch9s2s7_record_attributes"></a>
9.2.7 NetworkMonitor Recording Attributes</h2>
<p>The method <code>setRecordingAttributes(varargin)</code> can be used to set default recording attributes. These default settings will apply to all recordings, unless their values are overwritten explicitly in the <code>recordMovie</code> method (see <a class="el" href="ch9_matlab_oat.html#ch9s3s6_record_movie">9.3.6 Recording a Movie</a>).</p>
<p>The following command sets the value of variable <code>propertyName1</code> to value <code>value1</code>: </p><div class="fragment"><div class="line">&gt;&gt; NM.setRecordingAttributes(<span class="stringliteral">&#39;propertyName1&#39;</span>,value1);</div>
</div><!-- fragment --><p> Additional variables can be flexibly appended; order or capitalization does not matter. A list of available attributes can be displayed via: </p><div class="fragment"><div class="line">&gt;&gt; help NetworkMonitor.setRecordingAttributes</div>
<div class="line"> </div>
<div class="line">NM.setRecordingAttributes(varargin) can be used to set</div>
<div class="line"><span class="keywordflow">default</span> settings that will apply to all activity recordings.</div>
<div class="line">This <span class="keyword">function</span> provides control over additional attributes</div>
<div class="line">that are not available as input arguments to GM.recordMovie.</div>
<div class="line">GM.setRecordingAttributes(<span class="stringliteral">&#39;propertyName1&#39;</span>,value1,...) sets</div>
<div class="line">the value of <span class="stringliteral">&#39;propertyName1&#39;</span> to value1.</div>
<div class="line"> </div>
<div class="line">Calling the <span class="keyword">function</span> without input arguments will restore the</div>
<div class="line"><span class="keywordflow">default</span> settings.</div>
<div class="line"> </div>
<div class="line">BGCOLOR        - Set background color <span class="keywordflow">for</span> figure. Must be of</div>
<div class="line">                 type ColorSpec (<span class="keywordtype">char</span> such as <span class="charliteral">&#39;w&#39;</span>,<span class="charliteral">&#39;b&#39;</span>,<span class="charliteral">&#39;k&#39;</span> or</div>
<div class="line">                 a 3-element vector <span class="keywordflow">for</span> RGB channels). The</div>
<div class="line">                 <span class="keywordflow">default</span> is white.</div>
<div class="line">FILENAME       - File name where movie will be stored.</div>
<div class="line">                 Currently the only supported file ending is</div>
<div class="line">                 <span class="stringliteral">&quot;.avi&quot;</span>.</div>
<div class="line">FPS            - The frames per second <span class="keywordflow">for</span> the movie. The</div>
<div class="line">                 <span class="keywordflow">default</span> is 10.</div>
<div class="line">WINSIZE        - A 2-element vector specifying the window</div>
<div class="line">                 size of the video as width x height in</div>
<div class="line">                 pixels.Set to [0 0] in order to</div>
<div class="line">                 automatically make the movie window fit to</div>
<div class="line">                 the size of the plot window.</div>
</div><!-- fragment --> <dl class="section since"><dt>Since</dt><dd>v3.0</dd></dl>
<h1><a class="anchor" id="ch9s3_group_monitor"></a>
9.3 GroupMonitor</h1>
<dl class="section author"><dt>Author</dt><dd>Michael Beyeler</dd></dl>
<p>A <a class="el" href="classGroupMonitor.html" title="Class GroupMonitor.">GroupMonitor</a> can be used to monitor properties as well as the activity of a specific neuronal group in a network. The monitor will assume that a corresponding spike file was created via <a class="el" href="classSpikeMonitor.html" title="Class SpikeMonitor.">SpikeMonitor</a> during the <a class="el" href="classCARLsim.html" title="CARLsim User Interface This class provides a user interface to the public sections of CARLsimCore sou...">CARLsim</a> simulation.</p>
<p>The following methods are available: </p><div class="fragment"><div class="line">&gt;&gt; methods <a class="code" href="classGroupMonitor.html">GroupMonitor</a></div>
<div class="line"> </div>
<div class="line">getDefaultPlotType        % returns the <span class="keywordflow">default</span> plot type <span class="keywordflow">for</span> the group</div>
<div class="line">getError                  % returns the current error status (flag and message)</div>
<div class="line">getGrid3D                 % returns the <a class="code" href="structGrid3D.html">Grid3D</a> dimensions of the group</div>
<div class="line">getNumNeurons             % returns the number of neurons in the group</div>
<div class="line">getSimDurMs               % returns the estimated simulation duration (ms)</div>
<div class="line">getSpikeFileName          % returns spike file name created from <span class="keyword">template</span></div>
<div class="line">hasValidSpikeFile         % returns a flag whether valid spike file was found</div>
<div class="line">plot                      % plots data in current figure/axes</div>
<div class="line">recordMovie               % records data from current figure/axes to AVI movie file</div>
<div class="line">setDefaultPlotType        % set <span class="keywordflow">default</span> plot type of a group (raster plot, flow field, etc.)</div>
<div class="line">setErrorMode              % set error mode (&#39;standard&#39;, &#39;warning&#39;, &#39;silent&#39;)</div>
<div class="line">setGrid3D                 % set the <a class="code" href="structGrid3D.html">Grid3D</a> dimensions of the group (for plotting and recording)</div>
<div class="line">setPlottingAttributes     % settings for customizing the plotting process</div>
<div class="line">setRecordingAttributes    % settings for customizing the recording process (to AVI file)</div>
<div class="line">setSpikeFileAttributes    % set prefix/suffix of spike file naming template</div>
</div><!-- fragment --><p>The following public members (properties) are available: </p><div class="fragment"><div class="line">&gt;&gt; properties <a class="code" href="classGroupMonitor.html">GroupMonitor</a></div>
<div class="line"> </div>
<div class="line">name                      % name of the group</div>
<div class="line">resultsFolder             % path to results folder</div>
<div class="line">supportedErrorModes       % list of supported error modes</div>
<div class="line">supportedPlotTypes        % list of supported plot types</div>
</div><!-- fragment --><h2><a class="anchor" id="ch9s3s1_create"></a>
9.3.1 Creating a GroupMonitor</h2>
<p>In order to open a <a class="el" href="classGroupMonitor.html" title="Class GroupMonitor.">GroupMonitor</a>, specify the name of the group (given during a <a class="el" href="classCARLsim.html" title="CARLsim User Interface This class provides a user interface to the public sections of CARLsimCore sou...">CARLsim</a> simulation via <a class="el" href="classCARLsim.html#a6e11c10b6b079715074d857452c42e11" title="creates a group of Izhikevich spiking neurons">CARLsim::createGroup</a> or <a class="el" href="classCARLsim.html#a0bf4d12b0b90740faf9a2f6a4add0351" title="creates a spike generator group">CARLsim::createSpikeGeneratorGroup</a>) and the directory in which the spike file resides (<code>results/</code> by default): </p><div class="fragment"><div class="line">&gt;&gt; GM = <a class="code" href="classGroupMonitor.html">GroupMonitor</a>(<span class="stringliteral">&#39;excit&#39;</span>,<span class="stringliteral">&#39;results/&#39;</span>);</div>
<div class="line"> </div>
<div class="line">GM =</div>
<div class="line"> </div>
<div class="line">  <a class="code" href="classGroupMonitor.html">GroupMonitor</a> with properties:</div>
<div class="line"> </div>
<div class="line">                   name: <span class="stringliteral">&#39;excit&#39;</span></div>
<div class="line">          resultsFolder: <span class="stringliteral">&#39;results/&#39;</span></div>
<div class="line">              errorMode: []</div>
<div class="line">    supportedErrorModes: {<span class="stringliteral">&#39;standard&#39;</span>  <span class="stringliteral">&#39;warning&#39;</span>  <span class="stringliteral">&#39;silent&#39;</span>}</div>
<div class="line">     supportedPlotTypes: {<span class="stringliteral">&#39;flowfield&#39;</span>  <span class="stringliteral">&#39;heatmap&#39;</span>  <span class="stringliteral">&#39;histogram&#39;</span>  <span class="stringliteral">&#39;raster&#39;</span>}</div>
</div><!-- fragment --><p> By default, this will look for a spike file named <code>spk_{group name}.dat</code> in the <code>results/</code> directory, which is the default name pattern for spike files created with <a class="el" href="classCARLsim.html#a1e0b4d170b65f5075f1a996554c842ab" title="Sets a Spike Monitor for a groups, prints spikes to binary file.">CARLsim::setSpikeMonitor</a>. </p><dl class="section since"><dt>Since</dt><dd>v3.0</dd></dl>
<h2><a class="anchor" id="ch9s3s2_setspikefileattributes"></a>
9.3.2 Setting the Spike File Attributes</h2>
<p>In case the spike file does not follow the default pattern, creating a <a class="el" href="classGroupMonitor.html" title="Class GroupMonitor.">GroupMonitor</a> will result in the following warning: </p><div class="fragment"><div class="line">&gt;&gt; GM = <a class="code" href="classGroupMonitor.html">GroupMonitor</a>(<span class="stringliteral">&#39;excit&#39;</span>,<span class="stringliteral">&#39;results/&#39;</span>);</div>
<div class="line">Warning: Could not find valid spike file <span class="stringliteral">&quot;results/spk_excit.dat&quot;</span>. Use setSpikeFileAttributes to</div>
<div class="line">set a proper spike file prefix/suffix</div>
</div><!-- fragment --><p> and trying to call the plot method will result in an error message: </p><div class="fragment"><div class="line">&gt;&gt; GM.plot</div>
<div class="line">Error <span class="keyword">using</span> <a class="code" href="classGroupMonitor.html">GroupMonitor</a>/throwError (line 1133)</div>
<div class="line">Could not open file <span class="stringliteral">&quot;results/spk_excit.dat&quot;</span> with read permission</div>
</div><!-- fragment --><p>In this case, the method <code>setSpikeFileAttributes</code> can be used to change the default prefix and suffix of the spike file name. In the above case, the prefix would be <code>spk_</code> and the suffix would be <code>.dat</code>. Analogously, for a spike file following the naming convention <code>spike_{group name}.ext</code> the prefix would be <code>spike_</code> and the suffix would be <code>.ext</code>. After prefix/suffix have been set accordingly, the spike file will be found and activity can be plotted: </p><div class="fragment"><div class="line">&gt;&gt; GM.hasValidSpikeFile()</div>
<div class="line"> </div>
<div class="line">ans =</div>
<div class="line"> </div>
<div class="line">     0</div>
<div class="line"> </div>
<div class="line">&gt;&gt; GM.setSpikeFileAttributes(<span class="stringliteral">&#39;spike_&#39;</span>,<span class="stringliteral">&#39;.ext&#39;</span>);</div>
<div class="line">&gt;&gt; GM.hasValidSpikeFile()</div>
<div class="line"> </div>
<div class="line">ans =</div>
<div class="line"> </div>
<div class="line">     1</div>
<div class="line"> </div>
<div class="line">&gt;&gt; GM.plot</div>
</div><!-- fragment --> <dl class="section since"><dt>Since</dt><dd>v3.0</dd></dl>
<h2><a class="anchor" id="ch9s3s3_plot"></a>
9.3.3 Plotting Activity</h2>
<p>Once a <a class="el" href="classGroupMonitor.html" title="Class GroupMonitor.">GroupMonitor</a> has been set up, activity can be plotted using the <code>plot</code> method: </p><div class="fragment"><div class="line">&gt;&gt; GM.plot</div>
</div><!-- fragment --><p> This will plot the data in bins of 1000 ms in the current figure/axes using a default plot type, which is determined by the <a class="el" href="structGrid3D.html" title="A struct to arrange neurons on a 3D grid (a primitive cubic Bravais lattice with cubic side length 1)">Grid3D</a> dimensions of the group (see <a class="el" href="ch9_matlab_oat.html#ch9s3s4_plot_types">9.3.4 GroupMonitor Plot Types</a>).</p>
<p>A list of frames to be plotted as well as the histogram bin window (ms) can be specified directly. For example, the following command would bin the data into frames 500 ms length, and display the first, second, and eighth frame as a heat map: </p><div class="fragment"><div class="line">&gt;&gt; GM.plot(<span class="stringliteral">&#39;heatmap&#39;</span>,[1 2 8],500);</div>
</div><!-- fragment --><p>Every Monitor comes with an InteractiveMode for plotting activity and weights. By default, plotting will occur at a predefined speed (5 frames per second), unless otherwise specified using the method <code>setPlottingAttributes</code> (see <a class="el" href="ch9_matlab_oat.html#ch9s3s5_plot_attributes">9.3.5 GroupMonitor Plotting Attributes</a>). At any time, the user can hit key 'p' to pause plotting, or 'q' to quit. Hitting key 's' will enter stepping mode, which will freeze the current frame until the user either hits the 'right arrow' key (in order to step one frame forward) or the 'left arrow' key (in order to step one frame backward).</p>
<p>It is also possible to set the default plot type directly, so it does not have to be specified each time data is plotted or recorded: </p><div class="fragment"><div class="line">&gt;&gt; GM.setDefaultPlotType(<span class="stringliteral">&#39;histogram&#39;</span>)</div>
</div><!-- fragment --><p> For a list of available plot types, please refer to <a class="el" href="ch9_matlab_oat.html#ch9s3s4_plot_types">9.3.4 GroupMonitor Plot Types</a>.</p>
<p>A number of additional plotting attributes can be set via <code>setPlottingAttributes</code>, such as the background color of the figure and the number of frames to be displayed per second (see <a class="el" href="ch9_matlab_oat.html#ch9s3s5_plot_attributes">9.3.5 GroupMonitor Plotting Attributes</a>).</p>
<p>Certain plot types, such as <code>'heatmap'</code> or <code>'flowfield'</code> depend on appropriate <a class="el" href="structGrid3D.html" title="A struct to arrange neurons on a 3D grid (a primitive cubic Bravais lattice with cubic side length 1)">Grid3D</a> dimensions (2D for the former, 3D for the latter). For example, the heatmap of a population with 100 neurons on a 100x1x1 grid will be a single row. But, the grid dimensions can be reshaped on-the-fly, to make them easier to visualize: </p><div class="fragment"><div class="line">&gt;&gt; GM.setGrid3D(10,10,1);   % reshape 100x1x1 grid into 10x10x1 grid</div>
<div class="line">&gt;&gt; GM.plot(<span class="stringliteral">&#39;heatmap&#39;</span>)</div>
</div><!-- fragment --><p> Note that the overall number of neurons must not change when specifying new grid dimensions.</p>
<p>The raw data of a spike file can also be read directly using a SpikeReader (see <a class="el" href="ch9_matlab_oat.html#ch9s5s2_spike_reader">9.5.2 Spike Reader</a>). </p><dl class="section see"><dt>See also</dt><dd><a class="el" href="ch9_matlab_oat.html#ch9s3s4_plot_types">9.3.4 GroupMonitor Plot Types</a> </dd>
<dd>
<a class="el" href="ch9_matlab_oat.html#ch9s3s5_plot_attributes">9.3.5 GroupMonitor Plotting Attributes</a> </dd>
<dd>
<a class="el" href="ch9_matlab_oat.html#ch9s5s2_spike_reader">9.5.2 Spike Reader</a> </dd></dl>
<dl class="section since"><dt>Since</dt><dd>v3.0</dd></dl>
<h2><a class="anchor" id="ch9s3s4_plot_types"></a>
9.3.4 GroupMonitor Plot Types</h2>
<p>The following image illustrates the different plot types that are available (applied to an arbitrary network):</p>
<div class="image">
<img src="9_gm_plottypes.jpg" alt=""/>
<div class="caption">
Supported GroupMonitor plot types: 'raster', 'heatmap', 'histogram', and 'flowfield'.</div></div>
<p>A specific default plot type can be set using <code>setDefaultPlotType</code>: </p><div class="fragment"><div class="line">&gt;&gt; GM.setDefaultPlotType(str);</div>
</div><!-- fragment --><p> where <code>str</code> is either <code>'flowfield'</code>, <code>'heatmap'</code>, <code>'histogram'</code>, or <code>'raster'</code>. This type will then apply to all subsequent plotting and recording commands, unless it is overwritten explicitly with one of the method's input arguments.</p>
<p>This value can be overwritten by explicitly specifying a plot type when using the methods <code>plot</code> (see <a class="el" href="ch9_matlab_oat.html#ch9s3s3_plot">9.3.3 Plotting Activity</a>) or <code>recordMovie</code> (see <a class="el" href="ch9_matlab_oat.html#ch9s3s6_record_movie">9.3.6 Recording a Movie</a>).</p>
<p>Plot type <code>'flowfield'</code> will plot a 2D vector field where the length of the vector is given as the firing rsate of the neuron times the corresponding vector orientation. The latter is inferred from the third <a class="el" href="structGrid3D.html" title="A struct to arrange neurons on a 3D grid (a primitive cubic Bravais lattice with cubic side length 1)">Grid3D</a> dimension, z. For example, <a class="el" href="structGrid3D.html" title="A struct to arrange neurons on a 3D grid (a primitive cubic Bravais lattice with cubic side length 1)">Grid3D(10,10,4)</a> plots a 10x10 vector flow field, assuming that neurons with z=0 code for direction=0deg, z=1 corresponds to direction=90deg, z=2 is 180deg, and z=3 is 270deg. Vectors with length smaller than 10% of the max in each frame are not shown.</p>
<p>Plot type <code>'heatmap'</code> will plot a topographical map of group activity (based on <a class="el" href="structGrid3D.html" title="A struct to arrange neurons on a 3D grid (a primitive cubic Bravais lattice with cubic side length 1)">Grid3D</a>) where hotter colors mean higher firing rate.</p>
<p>Plot type <code>'histogram'</code> will plot a histogram of firing rates in the group. The number of bins and whether to plot firing rates (Hz) instead of number of spikes can be set with options <code>'histNumBins'</code> and <code>'histShowRate'</code> in method <code>setPlottingAttributes</code>.</p>
<p>Plot type <code>'raster'</code> will output the data as a raster plot with bin window <code>binWindowMs</code>.</p>
<dl class="section note"><dt>Note</dt><dd>Make sure the <a class="el" href="structGrid3D.html" title="A struct to arrange neurons on a 3D grid (a primitive cubic Bravais lattice with cubic side length 1)">Grid3D</a> dimensions are appropriate for the current plot type (change dimensions via <code>setGrid3D</code>). </dd></dl>
<dl class="section since"><dt>Since</dt><dd>v3.0</dd></dl>
<h2><a class="anchor" id="ch9s3s5_plot_attributes"></a>
9.3.5 GroupMonitor Plotting Attributes</h2>
<p>The method <code>setPlottingAttributes(varargin)</code> can be used to set default plotting attributes. These default settings will apply to all activity plots, unless their values are overwritten explicitly in the <code>plot</code> method (see <a class="el" href="ch9_matlab_oat.html#ch9s3s3_plot">9.3.3 Plotting Activity</a>).</p>
<p>The following command sets the value of variable <code>propertyName1</code> to value <code>value1</code>: </p><div class="fragment"><div class="line">&gt;&gt; GM.setPlottingAttributes(<span class="stringliteral">&#39;propertyName1&#39;</span>,value1);</div>
</div><!-- fragment --><p> Additional variables can be flexibly appended; order or capitalization does not matter. A list of available attributes can be displayed via: </p><div class="fragment"><div class="line">&gt;&gt; help <a class="code" href="classGroupMonitor.html">GroupMonitor</a>.setPlottingAttributes</div>
<div class="line"> </div>
<div class="line">GM.setPlottingAttributes(varargin) can be used to set <span class="keywordflow">default</span></div>
<div class="line">settings that will apply to all activity plots.</div>
<div class="line">This <span class="keyword">function</span> provides control over additional attributes</div>
<div class="line">that are not available as input arguments to GM.plot.</div>
<div class="line">GM.setPlottingAttributes(<span class="stringliteral">&#39;propertyName1&#39;</span>,value1,...) sets the</div>
<div class="line">value of <span class="stringliteral">&#39;propertyName1&#39;</span> to value1.</div>
<div class="line"> </div>
<div class="line">Calling the <span class="keyword">function</span> without input arguments will restore the</div>
<div class="line"><span class="keywordflow">default</span> settings.</div>
<div class="line"> </div>
<div class="line">BGCOLOR         - Set background color <span class="keywordflow">for</span> figure. Must be of</div>
<div class="line">                  type ColorSpec (<span class="keywordtype">char</span> such as <span class="charliteral">&#39;w&#39;</span>,<span class="charliteral">&#39;b&#39;</span>,<span class="charliteral">&#39;k&#39;</span> or</div>
<div class="line">                  a 3-element vector <span class="keywordflow">for</span> RGB channels).</div>
<div class="line">                  Default: <span class="charliteral">&#39;w&#39;</span>.</div>
<div class="line">BINWINDOWMS     - The binning window (ms) in which the data</div>
<div class="line">                  will be displayed. Default: 1000.</div>
<div class="line">DISPFRAMENR     - A <span class="keywordtype">boolean</span> flag that indicates whether to</div>
<div class="line">                  display the frame number. Default: <span class="keyword">true</span>.</div>
<div class="line">FPS             - The frames per second <span class="keywordflow">for</span> the plotting</div>
<div class="line">                  loop. Default: 5.</div>
<div class="line">HISTNUMBINS     - Number of bins <span class="keywordflow">for</span> histogram. Default: 10.</div>
<div class="line">HISTSHOWRATE    - A <span class="keywordtype">boolean</span> flag to plot mean firing rates</div>
<div class="line">                  (Hz) <span class="keywordflow">for</span> plotType=<span class="stringliteral">&#39;histogram&#39;</span> instead of</div>
<div class="line">                  mere number of spikes. Default: <span class="keyword">true</span>.</div>
<div class="line">INTERACTIVEMODE - A <span class="keywordtype">boolean</span> flag to set InteractiveMode on or</div>
<div class="line">                  off. If it is off, key events/FPS/stepping</div>
<div class="line">                  will take no effect (helpful <span class="keywordflow">if</span> you want to</div>
<div class="line">                  take over control yourself). Default: <span class="keyword">true</span>.</div>
</div><!-- fragment --> <dl class="section since"><dt>Since</dt><dd>v3.0</dd></dl>
<h2><a class="anchor" id="ch9s3s6_record_movie"></a>
9.3.6 Recording a Movie</h2>
<p>Activity plots can be directly saved to AVI movie files via the following command: </p><div class="fragment"><div class="line">&gt;&gt; GM.recordMovie;</div>
</div><!-- fragment --><p>This will generate a default <a class="el" href="classGroupMonitor.html" title="Class GroupMonitor.">GroupMonitor</a> plot (see <a class="el" href="ch9_matlab_oat.html#ch9s3s3_plot">9.3.3 Plotting Activity</a>) and save the frames to an <code>.avi</code> binary using the MATLAB <code>VideoWriter</code> utility.</p>
<p>The following command will generate file called <code>myMovie.avi</code> that shows a heat map of group activity with binning window 500 ms, and display the first, second, and eighth frame at a playback rate of 1 fps: </p><div class="fragment"><div class="line">&gt;&gt; GM.recordMovie(<span class="stringliteral">&#39;myMovie.avi&#39;</span>, <span class="stringliteral">&#39;heatmap&#39;</span>, [1 2 8], 500, 1);</div>
<div class="line">created file <span class="stringliteral">&quot;myMovie.avi&quot;</span></div>
</div><!-- fragment --><dl class="section note"><dt>Note</dt><dd>Make sure the <a class="el" href="structGrid3D.html" title="A struct to arrange neurons on a 3D grid (a primitive cubic Bravais lattice with cubic side length 1)">Grid3D</a> dimensions are appropriate for the current plot type (change dimensions via <code>setGrid3D</code>). </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="ch9_matlab_oat.html#ch9s3s7_record_attributes">9.3.7 GroupMonitor Recording Attributes</a> </dd></dl>
<dl class="section since"><dt>Since</dt><dd>v3.0</dd></dl>
<h2><a class="anchor" id="ch9s3s7_record_attributes"></a>
9.3.7 GroupMonitor Recording Attributes</h2>
<p>The method <code>setRecordingAttributes(varargin)</code> can be used to set default recording attributes. These default settings will apply to all recordings, unless their values are overwritten explicitly in the <code>recordMovie</code> method (see <a class="el" href="ch9_matlab_oat.html#ch9s3s6_record_movie">9.3.6 Recording a Movie</a>).</p>
<p>The following command sets the value of variable <code>propertyName1</code> to value <code>value1</code>: </p><div class="fragment"><div class="line">&gt;&gt; GM.setRecordingAttributes(<span class="stringliteral">&#39;propertyName1&#39;</span>,value1);</div>
</div><!-- fragment --><p> Additional variables can be flexibly appended; order or capitalization does not matter. A list of available attributes can be displayed via: </p><div class="fragment"><div class="line">&gt;&gt; help <a class="code" href="classGroupMonitor.html">GroupMonitor</a>.setRecordingAttributes</div>
<div class="line"> </div>
<div class="line">GM.setRecordingAttributes(varargin) can be used to set</div>
<div class="line"><span class="keywordflow">default</span> settings that will apply to all activity recordings.</div>
<div class="line">This <span class="keyword">function</span> provides control over additional attributes</div>
<div class="line">that are not available as input arguments to GM.recordMovie.</div>
<div class="line">GM.setRecordingAttributes(<span class="stringliteral">&#39;propertyName1&#39;</span>,value1,...) sets</div>
<div class="line">the value of <span class="stringliteral">&#39;propertyName1&#39;</span> to value1.</div>
<div class="line"> </div>
<div class="line">Calling the <span class="keyword">function</span> without input arguments will restore the</div>
<div class="line"><span class="keywordflow">default</span> settings.</div>
<div class="line"> </div>
<div class="line">BGCOLOR        - Set background color <span class="keywordflow">for</span> figure. Must be of</div>
<div class="line">                 type ColorSpec (<span class="keywordtype">char</span> such as <span class="charliteral">&#39;w&#39;</span>,<span class="charliteral">&#39;b&#39;</span>,<span class="charliteral">&#39;k&#39;</span> or</div>
<div class="line">                 a 3-element vector <span class="keywordflow">for</span> RGB channels). The</div>
<div class="line">                 <span class="keywordflow">default</span> is white.</div>
<div class="line">FILENAME       - File name where movie will be stored.</div>
<div class="line">                 Currently the only supported file ending is</div>
<div class="line">                 <span class="stringliteral">&quot;.avi&quot;</span>.</div>
<div class="line">FPS            - The frames per second <span class="keywordflow">for</span> the movie. The</div>
<div class="line">                 <span class="keywordflow">default</span> is 10.</div>
<div class="line">WINSIZE        - A 2-element vector specifying the window</div>
<div class="line">                 size of the video as width x height in</div>
<div class="line">                 pixels.Set to [0 0] in order to</div>
<div class="line">                 automatically make the movie window fit to</div>
<div class="line">                 the size of the plot window.</div>
</div><!-- fragment --> <dl class="section since"><dt>Since</dt><dd>v3.0</dd></dl>
<h1><a class="anchor" id="ch9s4_connection_monitor"></a>
9.4 Connection Monitor</h1>
<dl class="section author"><dt>Author</dt><dd>Michael Beyeler</dd></dl>
<p>A <a class="el" href="classConnectionMonitor.html" title="Class ConnectionMonitor.">ConnectionMonitor</a> can be used to monitor properties as well as the synaptic weights of a specific connection in a network (specified via <a class="el" href="classCARLsim.html#a30b16b93d57551dcde0559e8a4e98e27" title="Connects a presynaptic to a postsynaptic group using fixed/plastic weights and a range of delay value...">CARLsim::connect</a>). The monitor will assume that a corresponding weight file was created via <a class="el" href="classConnectionMonitor.html" title="Class ConnectionMonitor.">ConnectionMonitor</a> during the <a class="el" href="classCARLsim.html" title="CARLsim User Interface This class provides a user interface to the public sections of CARLsimCore sou...">CARLsim</a> simulation.</p>
<p>The following methods are available: </p><div class="fragment"><div class="line">&gt;&gt; methods <a class="code" href="classConnectionMonitor.html">ConnectionMonitor</a></div>
<div class="line"> </div>
<div class="line">getConnectFileName        % returns the name of the connect file</div>
<div class="line">getDefaultPlotType        % returns the <span class="keywordflow">default</span> plot type <span class="keywordflow">for</span> the group</div>
<div class="line">getError                  % returns the current error status (flag and message)</div>
<div class="line">getGrid3DPre              % returns the <a class="code" href="structGrid3D.html">Grid3D</a> dimensions of the pre-synaptic group</div>
<div class="line">getGrid3DPost             % returns the <a class="code" href="structGrid3D.html">Grid3D</a> dimensions of the post-synaptic group</div>
<div class="line">getNeuronLocation3DPre    % returns the 3D location of a neuron ID in the pre-synaptic group</div>
<div class="line">getNeuronLocation3DPost   % returns the 3D location of a neuron ID in the post-synaptic group</div>
<div class="line">getNumSnapshots           % returns the number of snapshots present in the connect file</div>
<div class="line">getSnapshots              % returns the weight snapshots present in the connect file</div>
<div class="line">hasValidSpikeFile         % returns a flag whether valid connect file was found</div>
<div class="line">plot                      % plots data in current figure/axes</div>
<div class="line">recordMovie               % records data from current figure/axes to AVI movie file</div>
<div class="line">setConnectFileAttributes  % set prefix/suffix/separator of connect file naming <span class="keyword">template</span></div>
<div class="line">setDefaultPlotType        % set <span class="keywordflow">default</span> plot type of the connection (histogram, heat map, etc.)</div>
<div class="line">setPlottingAttributes     % settings for customizing the plotting process</div>
<div class="line">setRecordingAttributes    % settings for customizing the recording process (to AVI file)</div>
</div><!-- fragment --><p>The following public members (properties) are available: </p><div class="fragment"><div class="line">&gt;&gt; properties <a class="code" href="classConnectionMonitor.html">ConnectionMonitor</a></div>
<div class="line"> </div>
<div class="line">connId                    % connection ID (same as in <a class="code" href="classCARLsim.html#a30b16b93d57551dcde0559e8a4e98e27">CARLsim::connect</a>)</div>
<div class="line">grpPreName                % name of pre-synaptic group</div>
<div class="line">grpPostName               % name of post-synaptic group</div>
<div class="line">errorMode                 % current error mode</div>
<div class="line">resultsFolder             % path to results folder</div>
<div class="line">supportedErrorModes       % list of supported error modes</div>
<div class="line">supportedPlotTypes        % list of supported plot types</div>
</div><!-- fragment --><h2><a class="anchor" id="ch9s4s1_create"></a>
9.4.1 Creating a ConnectionMonitor</h2>
<p>In order to open a <a class="el" href="classConnectionMonitor.html" title="Class ConnectionMonitor.">ConnectionMonitor</a>, specify the name of the pre-synaptic and post-synaptic group (given during a <a class="el" href="classCARLsim.html" title="CARLsim User Interface This class provides a user interface to the public sections of CARLsimCore sou...">CARLsim</a> simulation via <a class="el" href="classCARLsim.html#a6e11c10b6b079715074d857452c42e11" title="creates a group of Izhikevich spiking neurons">CARLsim::createGroup</a> or <a class="el" href="classCARLsim.html#a0bf4d12b0b90740faf9a2f6a4add0351" title="creates a spike generator group">CARLsim::createSpikeGeneratorGroup</a>) and the directory in which the connect file resides (<code>results/</code> by default): </p><div class="fragment"><div class="line">&gt;&gt; CM = <a class="code" href="classConnectionMonitor.html">ConnectionMonitor</a>(<span class="stringliteral">&#39;input&#39;</span>,<span class="stringliteral">&#39;output&#39;</span>,<span class="stringliteral">&#39;results/&#39;</span>);</div>
<div class="line"> </div>
<div class="line">CM = </div>
<div class="line"> </div>
<div class="line">  <a class="code" href="classConnectionMonitor.html">ConnectionMonitor</a> with properties:</div>
<div class="line"> </div>
<div class="line">                 connId: []</div>
<div class="line">             grpPreName: <span class="stringliteral">&#39;input&#39;</span></div>
<div class="line">            grpPostName: <span class="stringliteral">&#39;output&#39;</span></div>
<div class="line">          resultsFolder: <span class="stringliteral">&#39;results&#39;</span></div>
<div class="line">              errorMode: <span class="stringliteral">&#39;standard&#39;</span></div>
<div class="line">    supportedErrorModes: {<span class="stringliteral">&#39;standard&#39;</span>  <span class="stringliteral">&#39;warning&#39;</span>  <span class="stringliteral">&#39;silent&#39;</span>}</div>
<div class="line">     supportedPlotTypes: {<span class="stringliteral">&#39;heatmap&#39;</span>  <span class="stringliteral">&#39;histogram&#39;</span>  <span class="stringliteral">&#39;receptivefield&#39;</span>  <span class="stringliteral">&#39;responsefield&#39;</span>}</div>
</div><!-- fragment --><p> By default, this will look for a connect file named <code>conn_{pre-group name}_{post-group name}.dat</code> in the <code>results/</code> directory, which is the default name pattern for connect files created with <a class="el" href="classCARLsim.html#a0f4f273689484d0ceaa5a40f64fc82fc" title="Sets a connection monitor for a group, custom ConnectionMonitor class.">CARLsim::setConnectionMonitor</a>. </p><dl class="section since"><dt>Since</dt><dd>v3.0</dd></dl>
<h2><a class="anchor" id="ch9s4s2_setconnectfileattributes"></a>
9.4.2 Setting the Connect File Attributes</h2>
<p>In case the connect file does not follow the default pattern, creating a <a class="el" href="classConnectionMonitor.html" title="Class ConnectionMonitor.">ConnectionMonitor</a> will result in the following warning: </p><div class="fragment"><div class="line">&gt;&gt; CM = <a class="code" href="classConnectionMonitor.html">ConnectionMonitor</a>(<span class="stringliteral">&#39;input,&#39;</span>output<span class="charliteral">&#39;,&#39;</span>results/<span class="stringliteral">&#39;);</span></div>
<div class="line"><span class="stringliteral">Warning: Could not find valid connect file &quot;results/conn_input_output.dat&quot;. Use</span></div>
<div class="line"><span class="stringliteral">setConnectFileAttributes to set a proper connect file prefix/suffix/separator</span></div>
</div><!-- fragment --><p> and trying to call the plot method will result in an error message: </p><div class="fragment"><div class="line">&gt;&gt; GM.plot</div>
<div class="line">Error <span class="keyword">using</span> <a class="code" href="classConnectionMonitor.html">ConnectionMonitor</a>/throwError (line 1129)</div>
<div class="line">Could not open file <span class="stringliteral">&quot;results/conn_input_output.dat&quot;</span> with read permission</div>
</div><!-- fragment --><p>In this case, the method <code>setConnectFileAttributes</code> can be used to change the default prefix, suffix, and separator of the connect file name. In the above case, the prefix would be <code>conn_</code>, the separator would be <code>_</code>, and the suffix would be <code>.dat</code>. Note that only the "_" between group names counts as the separator. Analogously, for a connect file following the naming convention <code>connect_{pre-group name}-{post-group name}.ext</code> the prefix would be <code>connect_</code>, the separator would be <code>-</code>, and the suffix would be <code>.ext</code>. After prefix/suffix/separator have been set accordingly, the connect file will be found and weights can be plotted: </p><div class="fragment"><div class="line">&gt;&gt; CM.hasValidConnectFile()</div>
<div class="line"> </div>
<div class="line">ans =</div>
<div class="line"> </div>
<div class="line">     0</div>
<div class="line"> </div>
<div class="line">&gt;&gt; CM.setSpikeFileAttributes(<span class="stringliteral">&#39;connect_&#39;</span>,<span class="charliteral">&#39;-&#39;</span>,<span class="stringliteral">&#39;.ext&#39;</span>);</div>
<div class="line">&gt;&gt; CM.hasValidConnectFile()</div>
<div class="line"> </div>
<div class="line">ans =</div>
<div class="line"> </div>
<div class="line">     1</div>
<div class="line"> </div>
<div class="line">&gt;&gt; CM.plot</div>
</div><!-- fragment --> <dl class="section since"><dt>Since</dt><dd>v3.0</dd></dl>
<h2><a class="anchor" id="ch9s4s3_plot"></a>
9.4.3 Plotting Weights</h2>
<p>Once a <a class="el" href="classConnectionMonitor.html" title="Class ConnectionMonitor.">ConnectionMonitor</a> has been set up, synaptic weights can be plotted using the <code>plot</code> method: </p><div class="fragment"><div class="line">&gt;&gt; CM.plot</div>
</div><!-- fragment --><p> This will plot each weight snapshot (or frame) in the current figure/axes using a default plot type, which is determined by the size of the weight matrix (see <a class="el" href="ch9_matlab_oat.html#ch9s4s4_plot_types">9.4.4 ConnectionMonitor Plot Types</a>).</p>
<p>A list of frames (or snapshots) and neurons to be plotted can be specified directly. For example, the following command would display the first, second, and eighth weight snapshot as a 2D heat map: </p><div class="fragment"><div class="line">&gt;&gt; CM.plot(<span class="stringliteral">&#39;heatmap&#39;</span>,[1 2 8]);</div>
</div><!-- fragment --><p>Every Monitor comes with an InteractiveMode for plotting activity and weights. By default, plotting will occur at a predefined speed (5 frames per second), unless otherwise specified using the method <code>setPlottingAttributes</code> (see <a class="el" href="ch9_matlab_oat.html#ch9s4s5_plot_attributes">9.4.5 ConnectionMonitor Plotting Attributes</a>). At any time, the user can hit key 'p' to pause plotting, or 'q' to quit. Hitting key 's' will enter stepping mode, which will freeze the current frame until the user either hits the 'right arrow' key (in order to step one frame forward) or the 'left arrow' key (in order to step one frame backward).</p>
<p>It is also possible to set the default plot type directly, so it does not have to be specified each time data is plotted or recorded: </p><div class="fragment"><div class="line">&gt;&gt; CM.setDefaultPlotType(<span class="stringliteral">&#39;histogram&#39;</span>)</div>
</div><!-- fragment --><p> For a list of available plot types, please refer to <a class="el" href="ch9_matlab_oat.html#ch9s4s4_plot_types">9.4.4 ConnectionMonitor Plot Types</a>.</p>
<p>A number of additional plotting attributes can be set via <code>setPlottingAttributes</code>, such as the background color of the figure and the number of frames to be displayed per second (see <a class="el" href="ch9_matlab_oat.html#ch9s4s5_plot_attributes">9.4.5 ConnectionMonitor Plotting Attributes</a>).</p>
<p>It is also possible to display weight data only for a subset of pre-synaptic or post-synaptic neurons. This makes it possible to visualize the receptive field of a post-synaptic neuron, or the response field of a pre-synaptic neuron.</p>
<p>The raw data of a connect file can also be read directly using a ConnectionReader (see <a class="el" href="ch9_matlab_oat.html#ch9s5s3_connection_reader">9.5.3 Connection Reader</a>). </p><dl class="section see"><dt>See also</dt><dd><a class="el" href="ch9_matlab_oat.html#ch9s4s4_plot_types">9.4.4 ConnectionMonitor Plot Types</a> </dd>
<dd>
<a class="el" href="ch9_matlab_oat.html#ch9s4s5_plot_attributes">9.4.5 ConnectionMonitor Plotting Attributes</a> </dd>
<dd>
<a class="el" href="ch9_matlab_oat.html#ch9s5s3_connection_reader">9.5.3 Connection Reader</a> </dd></dl>
<dl class="section since"><dt>Since</dt><dd>v3.0</dd></dl>
<h2><a class="anchor" id="ch9s4s4_plot_types"></a>
9.4.4 ConnectionMonitor Plot Types</h2>
<p>The following image illustrates the different plot types that are available (applied to the small "Hello World" network, which consists of 13x9 neurons projecting to 3x3 neurons with Gaussian connectivity):</p>
<div class="image">
<img src="9_cm_plottypes.jpg" alt=""/>
<div class="caption">
Supported ConnectionMonitor plot types: 'heatmap', 'histogram', 'receptivefield', and 'responsefield'.</div></div>
<p>A specific default plot type can be set using <code>setDefaultPlotType</code>: </p><div class="fragment"><div class="line">&gt;&gt; CM.setDefaultPlotType(str);</div>
</div><!-- fragment --><p> where <code>str</code> is either <code>'heatmap'</code>, <code>'histogram'</code>, <code>'receptivefield'</code>, or <code>'responsefield'</code>. This type will then apply to all subsequent plotting and recording commands, unless it is overwritten explicitly with one of the method's input arguments.</p>
<p>This value can be overwritten by explicitly specifying a plot type when using the methods <code>plot</code> (see <a class="el" href="ch9_matlab_oat.html#ch9s4s3_plot">9.4.3 Plotting Weights</a>) or <code>recordMovie</code> (see <a class="el" href="ch9_matlab_oat.html#ch9s4s6_record_movie">9.4.6 Recording a Movie</a>).</p>
<p>Plot type <code>'heatmap'</code> will plot a 2D weight matrix where the first dimension corresponds to the number of neurons in the pre-synaptic group (labeled <code>nrPre</code> in the image above), and the second dimension corresponds to the number of neurons in the post-synaptic group (labeled <code>nrPost</code> in the image above).</p>
<p>Plot type <code>'histogram'</code> will plot a histogram of all weight values in the connection.</p>
<p>Plot type <code>'receptivefield'</code> will plot the spatial receptive field of post-synaptic neurons (looking back on all connected pre-synaptic neurons). By default, the receptive field of all neurons will be shown. An additional argument to <code>plot</code> allows to specify a list of neurons for which to show the receptive field. For example, the receptive field in the above image (third panel) was generated with: </p><div class="fragment"><div class="line">CM.plot(<span class="stringliteral">&#39;receptivefield&#39;</span>,1,5); % plotType, frames, neurons</div>
</div><!-- fragment --><p> shown for the first frame and the fifth neuron in the post-synaptic group (which is located at (0,0,0)).</p>
<p>Plot type <code>'responsefield'</code> will plot the spatial response field of pre-synaptic neurons (looking forward on all connected post-synaptic neurons). By default, the response field of all neurons will be shown. An additional argument to <code>plot</code> allows to specify a list of neurons for which to show the response field. For example, the response field in the above image (fourth panel) was generated with: </p><div class="fragment"><div class="line">CM.plot(<span class="stringliteral">&#39;responsefield&#39;</span>,1,59); % plotType, frames, neurons</div>
</div><!-- fragment --><p> shown for the first frame and the 59th neuron in the pre-synaptic group (which is located at (0,0,0)).</p>
<dl class="section since"><dt>Since</dt><dd>v3.0</dd></dl>
<h2><a class="anchor" id="ch9s4s5_plot_attributes"></a>
9.4.5 ConnectionMonitor Plotting Attributes</h2>
<p>The method <code>setPlottingAttributes(varargin)</code> can be used to set default plotting attributes. These default settings will apply to all activity plots, unless their values are overwritten explicitly in the <code>plot</code> method (see <a class="el" href="ch9_matlab_oat.html#ch9s4s3_plot">9.4.3 Plotting Weights</a>).</p>
<p>The following command sets the value of variable <code>propertyName1</code> to value <code>value1</code>: </p><div class="fragment"><div class="line">&gt;&gt; CM.setPlottingAttributes(<span class="stringliteral">&#39;propertyName1&#39;</span>,value1);</div>
</div><!-- fragment --><p> Additional variables can be flexibly appended; order or capitalization does not matter. A list of available attributes can be displayed via: </p><div class="fragment"><div class="line">&gt;&gt; help <a class="code" href="classConnectionMonitor.html">ConnectionMonitor</a>.setPlottingAttributes</div>
<div class="line"> </div>
<div class="line">CM.setPlottingAttributes(varargin) can be used to set <span class="keywordflow">default</span></div>
<div class="line">settings that will apply to all activity plots.</div>
<div class="line">This <span class="keyword">function</span> provides control over additional attributes</div>
<div class="line">that are not available as input arguments to CM.plot or</div>
<div class="line">CM.plotFrame.</div>
<div class="line">CM.setPlottingAttributes(<span class="stringliteral">&#39;propertyName1&#39;</span>,value1,...) sets the</div>
<div class="line">value of <span class="stringliteral">&#39;propertyName1&#39;</span> to value1.</div>
<div class="line"> </div>
<div class="line">Calling the <span class="keyword">function</span> without input arguments will restore the</div>
<div class="line"><span class="keywordflow">default</span> settings.</div>
<div class="line"> </div>
<div class="line">BGCOLOR         - Set background color <span class="keywordflow">for</span> figure. Must be of</div>
<div class="line">                  type ColorSpec (<span class="keywordtype">char</span> such as <span class="charliteral">&#39;w&#39;</span>,<span class="charliteral">&#39;b&#39;</span>,<span class="charliteral">&#39;k&#39;</span> or</div>
<div class="line">                  a 3-element vector <span class="keywordflow">for</span> RGB channels).</div>
<div class="line">                  Default: <span class="charliteral">&#39;w&#39;</span>.</div>
<div class="line">BINWINDOWMS     - The binning window (ms) in which the data</div>
<div class="line">                  will be displayed. Default: 1000.</div>
<div class="line">DISPFRAMENR     - A <span class="keywordtype">boolean</span> flag that indicates whether to</div>
<div class="line">                  display the frame number. Default: <span class="keyword">true</span>.</div>
<div class="line">FPS             - The frames per second <span class="keywordflow">for</span> the plotting</div>
<div class="line">                  loop. Default: 5.</div>
<div class="line">HISTNUMBINS     - Number of bins <span class="keywordflow">for</span> histogram. Default: 20.</div>
<div class="line">INTERACTIVEMODE - A <span class="keywordtype">boolean</span> flag to set InteractiveMode on or</div>
<div class="line">                  off. If it is off, key events/FPS/stepping</div>
<div class="line">                  will take no effect (helpful <span class="keywordflow">if</span> you want to</div>
<div class="line">                  take over control yourself). Default: <span class="keyword">true</span>.</div>
</div><!-- fragment --> <dl class="section since"><dt>Since</dt><dd>v3.0</dd></dl>
<h2><a class="anchor" id="ch9s4s6_record_movie"></a>
9.4.6 Recording a Movie</h2>
<p>Activity plots can be directly saved to AVI movie files via the following command: </p><div class="fragment"><div class="line">&gt;&gt; CM.recordMovie;</div>
</div><!-- fragment --><p>This will generate a default <a class="el" href="classConnectionMonitor.html" title="Class ConnectionMonitor.">ConnectionMonitor</a> plot (see <a class="el" href="ch9_matlab_oat.html#ch9s4s3_plot">9.4.3 Plotting Weights</a>) and save the frames to an <code>.avi</code> binary using the MATLAB <code>VideoWriter</code> utility.</p>
<p>The following command will generate file called <code>myMovie.avi</code> that shows a heat map of the weight matrix, and display the first, second, and eighth frame (or snapshot) at a playback rate of 1 fps: </p><div class="fragment"><div class="line">&gt;&gt; CM.recordMovie(<span class="stringliteral">&#39;myMovie.avi&#39;</span>, <span class="stringliteral">&#39;heatmap&#39;</span>, [1 2 8], 1);</div>
<div class="line">created file <span class="stringliteral">&quot;myMovie.avi&quot;</span></div>
</div><!-- fragment --><dl class="section see"><dt>See also</dt><dd><a class="el" href="ch9_matlab_oat.html#ch9s4s7_record_attributes">9.4.7 ConnectionMonitor Recording Attributes</a> </dd></dl>
<dl class="section since"><dt>Since</dt><dd>v3.0</dd></dl>
<h2><a class="anchor" id="ch9s4s7_record_attributes"></a>
9.4.7 ConnectionMonitor Recording Attributes</h2>
<p>The method <code>setRecordingAttributes(varargin)</code> can be used to set default recording attributes. These default settings will apply to all recordings, unless their values are overwritten explicitly in the <code>recordMovie</code> method (see <a class="el" href="ch9_matlab_oat.html#ch9s4s6_record_movie">9.4.6 Recording a Movie</a>).</p>
<p>The following command sets the value of variable <code>propertyName1</code> to value <code>value1</code>: </p><div class="fragment"><div class="line">&gt;&gt; CM.setRecordingAttributes(<span class="stringliteral">&#39;propertyName1&#39;</span>,value1);</div>
</div><!-- fragment --><p> Additional variables can be flexibly appended; order or capitalization does not matter. A list of available attributes can be displayed via: </p><div class="fragment"><div class="line">&gt;&gt; help <a class="code" href="classConnectionMonitor.html">ConnectionMonitor</a>.setRecordingAttributes</div>
<div class="line">CM.setRecordingAttributes(varargin) can be used to set</div>
<div class="line"><span class="keywordflow">default</span> settings that will apply to all activity recordings.</div>
<div class="line">This <span class="keyword">function</span> provides control over additional attributes</div>
<div class="line">that are not available as input arguments to CM.recordMovie.</div>
<div class="line">CM.setRecordingAttributes(<span class="stringliteral">&#39;propertyName1&#39;</span>,value1,...) sets</div>
<div class="line"> </div>
<div class="line">Calling the <span class="keyword">function</span> without input arguments will restore the</div>
<div class="line"><span class="keywordflow">default</span> settings.</div>
<div class="line"> </div>
<div class="line">BGCOLOR        - Set background color <span class="keywordflow">for</span> figure. Must be of</div>
<div class="line">                 type ColorSpec (<span class="keywordtype">char</span> such as <span class="charliteral">&#39;w&#39;</span>,<span class="charliteral">&#39;b&#39;</span>,<span class="charliteral">&#39;k&#39;</span> or</div>
<div class="line">                 a 3-element vector <span class="keywordflow">for</span> RGB channels). The</div>
<div class="line">                 <span class="keywordflow">default</span> is white.</div>
<div class="line">FILENAME       - File name where movie will be stored.</div>
<div class="line">                 Currently the only supported file ending is</div>
<div class="line">                 <span class="stringliteral">&quot;.avi&quot;</span>.</div>
<div class="line">FPS            - The frames per second <span class="keywordflow">for</span> the movie. The</div>
<div class="line">                 <span class="keywordflow">default</span> is 10.</div>
<div class="line">WINSIZE        - A 2-element vector specifying the window</div>
<div class="line">                 size of the video as width x height in</div>
<div class="line">                 pixels.Set to [0 0] in order to</div>
<div class="line">                 automatically make the movie window fit to</div>
<div class="line">                 the size of the plot window.</div>
</div><!-- fragment --> <dl class="section since"><dt>Since</dt><dd>v3.0</dd></dl>
<h1><a class="anchor" id="ch9s5_reading_raw_data"></a>
9.5 Reading Raw Data</h1>
<dl class="section author"><dt>Author</dt><dd>Michael Beyeler</dd></dl>
<p>Although the OAT provides a variety of functions to simplify the visualization and analysis of network activity or topology, there might be cases in which the user might like to have complete control over the process. Therefore, <a class="el" href="classCARLsim.html" title="CARLsim User Interface This class provides a user interface to the public sections of CARLsimCore sou...">CARLsim</a> also provides a means to directly read the simulation, spike, and weight file binaries generated during a simulation.</p>
<h2><a class="anchor" id="ch9s5s1_simulation_reader"></a>
9.5.1 Simulation Reader</h2>
<p>A SimulationReader can be used to read a simulation log file that is created by default by every <a class="el" href="classCARLsim.html" title="CARLsim User Interface This class provides a user interface to the public sections of CARLsimCore sou...">CARLsim</a> simulation, or by explicitly calling <a class="el" href="classCARLsim.html#a3b08150d9a98f80df57852450c0d87ed" title="Saves important simulation and network infos to file.">CARLsim::saveSimulation</a>. This allows to directly access important properties of the simulation run or the spiking network, without the need of a NetworkMonitor.</p>
<p>The following public members (properties) are available: </p><div class="fragment"><div class="line">&gt;&gt; properties SimulationReader</div>
<div class="line"> </div>
<div class="line">fileStr              % path to simulation file</div>
<div class="line">sim                  % <span class="keyword">struct </span>containing viable simulation/network information</div>
<div class="line">groups               % <span class="keyword">struct </span>containing all group info</div>
<div class="line">syn_preIDs           % pre-synaptic ID <span class="keywordflow">for</span> every synapse in the network</div>
<div class="line">syn_postIDs          % post-synaptic ID <span class="keywordflow">for</span> every synapse in the network</div>
<div class="line">syn_weights          % weight value <span class="keywordflow">for</span> every synapse in the network</div>
<div class="line">syn_maxWeights       % max weight value <span class="keywordflow">for</span> every synapse in the network</div>
<div class="line">syn_plastic          % type <span class="keywordflow">for</span> every synapse in the network</div>
<div class="line">syn_delays           % delay value <span class="keywordflow">for</span> every synapse in the network</div>
</div><!-- fragment --><p>The following code snippet points a SimulationReader to a simulation file <code>results/sim_myNet.dat</code> and populates the public member structs <code>sim</code> and <code>groups</code> with viable simulation/network information: </p><div class="fragment"><div class="line">&gt;&gt; SimR = SimulationReader(<span class="stringliteral">&#39;results/sim_myNet.dat&#39;</span>);</div>
</div><!-- fragment --><p>The <code>sim</code> struct can then be queried for values such as simulation time or execution time: </p><div class="fragment"><div class="line">&gt;&gt; SimR.sim.simTimeSec      % print simulation time (sec)</div>
<div class="line">&gt;&gt; SimR.sim.exeTimeSec      % print execution time (sec)</div>
<div class="line">&gt;&gt; SimR.sim.nGroups         % print number of groups in network</div>
<div class="line">&gt;&gt; SimR.sim.nNeurons        % print number of neurons in network</div>
<div class="line">&gt;&gt; % etc.</div>
</div><!-- fragment --><p>The <code>groups</code> struct can then be queried for values such as the <a class="el" href="structGrid3D.html" title="A struct to arrange neurons on a 3D grid (a primitive cubic Bravais lattice with cubic side length 1)">Grid3D</a> dimensions or neuron IDs: </p><div class="fragment"><div class="line">&gt;&gt; SimR.groups(1).sizeN        % print number of neurons in first group</div>
<div class="line">&gt;&gt; SimR.groups(1).startN       % print ID of first neuron in first group</div>
<div class="line">&gt;&gt; SimR.groups(1).grid3D       % print <a class="code" href="structGrid3D.html">Grid3D</a> dimensions of first group</div>
<div class="line">&gt;&gt; % etc.</div>
</div><!-- fragment --><p>By default, the deprecated <code>syn_*</code> properties will not be populated by the constructor call. In order to access these properties, the constructor needs to be called with an additional flag <code>loadSynapseInfo</code>: </p><div class="fragment"><div class="line">&gt;&gt; SimR = SimulationReader(<span class="stringliteral">&#39;results/sim_myNet.dat&#39;</span>,<span class="keyword">true</span>);</div>
</div><!-- fragment --><p> Note that for this to work, the simulation must have been saved with <a class="el" href="classCARLsim.html#a3b08150d9a98f80df57852450c0d87ed" title="Saves important simulation and network infos to file.">CARLsim::saveSimulation</a> input argument <code>saveSynapseInfo</code> set to true.</p>
<dl class="section note"><dt>Note</dt><dd>Use of the <code>syn_*</code> properties above is deprecated. Use <a class="el" href="classConnectionMonitor.html" title="Class ConnectionMonitor.">ConnectionMonitor</a> or ConnectionReader to access synapse information instead. </dd></dl>
<dl class="section since"><dt>Since</dt><dd>v3.0</dd></dl>
<h2><a class="anchor" id="ch9s5s2_spike_reader"></a>
9.5.2 Spike Reader</h2>
<p>A SpikeReader can be used to read raw spike file data that was generated with the <a class="el" href="classSpikeMonitor.html" title="Class SpikeMonitor.">SpikeMonitor</a> utility in <a class="el" href="classCARLsim.html" title="CARLsim User Interface This class provides a user interface to the public sections of CARLsimCore sou...">CARLsim</a>. This allows to directly access the spike data, be it in AER format or binned in suitable time windows, without the need of a <a class="el" href="classGroupMonitor.html" title="Class GroupMonitor.">GroupMonitor</a> or NetworkMonitor.</p>
<p>The following methods are available: </p><div class="fragment"><div class="line">&gt;&gt; methods SpikeReader</div>
<div class="line"> </div>
<div class="line">getError               % returns the current error status (flag and message)</div>
<div class="line">getGrid3D              % returns the <a class="code" href="structGrid3D.html">Grid3D</a> dimensions of the group</div>
<div class="line">getSimDurMs            % returns the estimated simulation duration (ms)</div>
<div class="line">readSpikes             % reads spike files and returns data binned or in <a class="code" href="carlsim__datastructures_8h.html#a2e28176a10c3a6cffa14fba1ab21682da3d6cce42ae7758ad2adb9e1e7e6f9eff">AER</a> format</div>
</div><!-- fragment --><p>The following public members (properties) are available: </p><div class="fragment"><div class="line">&gt;&gt; properties SpikeReader</div>
<div class="line"> </div>
<div class="line">fileStr                % path to spike file</div>
<div class="line">errorMode              % current error mode</div>
<div class="line">supportedErrorModes    % list of supported error modes</div>
</div><!-- fragment --><p>The following code snippet points a SpikeReader object to a spike file <code>results/spk_group1.dat</code> (generated with the <a class="el" href="classSpikeMonitor.html" title="Class SpikeMonitor.">SpikeMonitor</a> utility in <a class="el" href="classCARLsim.html" title="CARLsim User Interface This class provides a user interface to the public sections of CARLsimCore sou...">CARLsim</a>) and returns the spike data binned into 100 ms time windows: </p><div class="fragment"><div class="line">&gt;&gt; SR = SpikeReader(<span class="stringliteral">&#39;results/spk_group1.dat&#39;</span>);</div>
<div class="line">&gt;&gt; spkData = SR.readSpikes(100); % binWindowMs</div>
</div><!-- fragment --><p>The variable <code>spkData</code> will return spike data in a 2D matrix, where the first dimension corresponds to the bin windows and the second dimension corresponds to the number of neurons in the group (1-indexed). For example, with a binning window of 100ms, <code>spkData(1,1)</code> would contain the number of spikes that the first neuron in the group emitted in the first 100ms (t = 0 .. 99ms) of the simulation.</p>
<p>Alternatively, spike data can be returned in AER format (as <code>[times;neurIds]</code>) if the <code>binWindowMs</code> input argument to <code>readSpikes</code> is set to -1: </p><div class="fragment"><div class="line">&gt;&gt; SR = SpikeReader(<span class="stringliteral">&#39;results/spk_group1.dat&#39;</span>);</div>
<div class="line">&gt;&gt; spkData = SR.readSpikes(-1); % binWindowMs</div>
</div><!-- fragment --><p>The generation of a raster plot is then as easy as: </p><div class="fragment"><div class="line">&gt;&gt; plot(spkData(1,:), spkData(2,:), <span class="stringliteral">&#39;.k&#39;</span>);</div>
<div class="line">&gt;&gt; xlabel(<span class="stringliteral">&#39;time (ms)&#39;</span>)</div>
<div class="line">&gt;&gt; ylabel(<span class="stringliteral">&#39;neuron ID&#39;</span>)</div>
</div><!-- fragment --><p>The SpikeReader can also be queried for an estimate about the total simulation duration via: </p><div class="fragment"><div class="line">&gt;&gt; simDur = SR.getSimDurMs();</div>
</div><!-- fragment --><p> Note that this is only an estimate, based on the last spike time in the group. Other than that, a SpikeReader object does not know about any simulation procedures. </p><dl class="section since"><dt>Since</dt><dd>v3.0</dd></dl>
<h2><a class="anchor" id="ch9s5s3_connection_reader"></a>
9.5.3 Connection Reader</h2>
<p>A ConnectionReader can be used to read raw connection file data that was generated with the <a class="el" href="classConnectionMonitor.html" title="Class ConnectionMonitor.">ConnectionMonitor</a> utility in <a class="el" href="classCARLsim.html" title="CARLsim User Interface This class provides a user interface to the public sections of CARLsimCore sou...">CARLsim</a>. This allows to directly access the weight data, at specific times, without the need of a <a class="el" href="classConnectionMonitor.html" title="Class ConnectionMonitor.">ConnectionMonitor</a>.</p>
<p>The following methods are available: </p><div class="fragment"><div class="line">&gt;&gt; methods ConnectionReader</div>
<div class="line"> </div>
<div class="line">getError               % returns the current error status (flag and message)</div>
<div class="line">getGrid3DPre           % returns the <a class="code" href="structGrid3D.html">Grid3D</a> dimensions of the pre-synaptic group</div>
<div class="line">getGrid3DPost          % returns the <a class="code" href="structGrid3D.html">Grid3D</a> dimensions of the post-synaptic group</div>
<div class="line">getNumNeuronsPre       % returns the number of neurons in the pre-synaptic group</div>
<div class="line">getNumNeuronsPost      % returns the number of neurons in the post-synaptic group</div>
<div class="line">getNumSnapshots        % returns the number of snapshots in the connection file</div>
<div class="line">readWeights            % returns the weights of a connection at specific simulation times</div>
</div><!-- fragment --><p>The following public members (properties) are available: </p><div class="fragment"><div class="line">&gt;&gt; properties ConnectionReader</div>
<div class="line"> </div>
<div class="line">fileStr                % path to connection file</div>
<div class="line">errorMode              % current error mode</div>
<div class="line">supportedErrorModes    % list of supported error modes</div>
</div><!-- fragment --><p>The following code snippet points a ConnectionReader object to a connection file <code>results/conn_group1_group2.dat</code> (generated with the <a class="el" href="classConnectionMonitor.html" title="Class ConnectionMonitor.">ConnectionMonitor</a> utility in <a class="el" href="classCARLsim.html" title="CARLsim User Interface This class provides a user interface to the public sections of CARLsimCore sou...">CARLsim</a>) and returns the weight data for all recorded snapshots: </p><div class="fragment"><div class="line">&gt;&gt; CR = ConnectionReader(<span class="stringliteral">&#39;results/conn_group1_group2.dat&#39;</span>);</div>
<div class="line">&gt;&gt; [allTimestamps, allWeights] = CR.readWeights();</div>
</div><!-- fragment --><p> The variable <code>allTimestamps</code> will contain a list of timestamps (ms) at which the corresponding weights were recorded. The variable <code>allWeights</code> will return the weight data in a 2D matrix, where the first dimension specifies the snapshot number and the second dimension corresponds to all synaptic weights for that specific snapshot. For example, <code>allWeights(1,:)</code> would contain all synaptic weights recorded during the first snapshot. The timestamp of the first snapshot can be retrieved via <code>allTimestamps(1)</code>.</p>
<p>Plotting a histogram of all weights is then as easy as: </p><div class="fragment"><div class="line">&gt;&gt; hist(allWeights(1,:));</div>
<div class="line">&gt;&gt; xlabel(<span class="stringliteral">&#39;weight value&#39;</span>)</div>
<div class="line">&gt;&gt; ylabel(<span class="stringliteral">&#39;number of occurrences&#39;</span>)</div>
</div><!-- fragment --><p>Alternatively, the weight vector can be reshaped as a 2D weight matrix according to the population dimensions and plotted as a heatmap: </p><div class="fragment"><div class="line">&gt;&gt; imagesc( reshape(allWeights(1,:), CR.getNumNeuronsPost(), CR.getNumNeuronsPre()) );</div>
<div class="line">&gt;&gt; xlabel(<span class="stringliteral">&#39;nrPre&#39;</span>)</div>
<div class="line">&gt;&gt; ylabel(<span class="stringliteral">&#39;nrPost&#39;</span>)</div>
</div><!-- fragment --> <dl class="section since"><dt>Since</dt><dd>v3.0</dd></dl>
<h1><a class="anchor" id="ch9s6_migrating_scripts"></a>
9.6 Migrating from CARLsim 2.2</h1>
<dl class="section author"><dt>Author</dt><dd>Michael Beyeler</dd></dl>
<p>Please note that the following scripts from <a class="el" href="classCARLsim.html" title="CARLsim User Interface This class provides a user interface to the public sections of CARLsimCore sou...">CARLsim</a> 2.2 (from former directory <code>scripts/common/</code>) are no longer available:</p><ul>
<li><code>readFramesFromRgbFile.m</code>: replaced with <a class="el" href="classVisualStimulus.html" title="Class to integrate CARLsim with a stimulus created using VisualStimulus.m Version: 4/11/14 Author: Mi...">VisualStimulus</a> Toolbox (see <a class="el" href="ch6_input.html#ch6s3_visual_stimulus_toolbox">6.3 Visual Stimulus Toolbox</a>)</li>
<li><code>readNetwork.m</code>: replaced with NetworkMonitors (see <a class="el" href="ch9_matlab_oat.html#ch9s2_network_monitor">9.2 NetworkMonitor</a>)</li>
<li><code>readSpikes.m</code>: replaced with Spike Readers (see <a class="el" href="ch9_matlab_oat.html#ch9s5s2_spike_reader">9.5.2 Spike Reader</a>)</li>
<li><code>readSpikesAERtoFull.m</code>: no longer available</li>
<li><code>writeFramesToRgbFile.m</code>: replaced with <a class="el" href="classVisualStimulus.html" title="Class to integrate CARLsim with a stimulus created using VisualStimulus.m Version: 4/11/14 Author: Mi...">VisualStimulus</a> Toolbox (see <a class="el" href="ch6_input.html#ch6s3_visual_stimulus_toolbox">6.3 Visual Stimulus Toolbox</a>) </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<div class="ttc" id="acarlsim__datastructures_8h_html_a2e28176a10c3a6cffa14fba1ab21682da3d6cce42ae7758ad2adb9e1e7e6f9eff"><div class="ttname"><a href="carlsim__datastructures_8h.html#a2e28176a10c3a6cffa14fba1ab21682da3d6cce42ae7758ad2adb9e1e7e6f9eff">AER</a></div><div class="ttdeci">@ AER</div><div class="ttdoc">mode in which spike information is collected in AER format</div><div class="ttdef"><b>Definition:</b> <a href="carlsim__datastructures_8h_source.html#l00202">carlsim_datastructures.h:202</a></div></div>
<div class="ttc" id="aclassGroupMonitor_html"><div class="ttname"><a href="classGroupMonitor.html">GroupMonitor</a></div><div class="ttdoc">Class GroupMonitor.</div><div class="ttdef"><b>Definition:</b> <a href="group__monitor_8h_source.html#l00103">group_monitor.h:103</a></div></div>
<div class="ttc" id="aclassCARLsim_html_a30b16b93d57551dcde0559e8a4e98e27"><div class="ttname"><a href="classCARLsim.html#a30b16b93d57551dcde0559e8a4e98e27">CARLsim::connect</a></div><div class="ttdeci">short int connect(int grpId1, int grpId2, const std::string &amp;connType, const RangeWeight &amp;wt, float connProb, const RangeDelay &amp;delay=RangeDelay(1), const RadiusRF &amp;radRF=RadiusRF(-1.0), bool synWtType=SYN_FIXED, float mulSynFast=1.0f, float mulSynSlow=1.0f)</div><div class="ttdoc">Connects a presynaptic to a postsynaptic group using fixed/plastic weights and a range of delay value...</div><div class="ttdef"><b>Definition:</b> <a href="carlsim_8cpp_source.html#l01739">carlsim.cpp:1739</a></div></div>
<div class="ttc" id="astructGrid3D_html"><div class="ttname"><a href="structGrid3D.html">Grid3D</a></div><div class="ttdoc">A struct to arrange neurons on a 3D grid (a primitive cubic Bravais lattice with cubic side length 1)</div><div class="ttdef"><b>Definition:</b> <a href="carlsim__datastructures_8h_source.html#l00489">carlsim_datastructures.h:489</a></div></div>
<div class="ttc" id="aclassConnectionMonitor_html"><div class="ttname"><a href="classConnectionMonitor.html">ConnectionMonitor</a></div><div class="ttdoc">Class ConnectionMonitor.</div><div class="ttdef"><b>Definition:</b> <a href="connection__monitor_8h_source.html#l00148">connection_monitor.h:148</a></div></div>
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Sat Jul 11 2020 19:24:13 for CARLsim by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.18 </li>
  </ul>
</div>
</body>
</html>
